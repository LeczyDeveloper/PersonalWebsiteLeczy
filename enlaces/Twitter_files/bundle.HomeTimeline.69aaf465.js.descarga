(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{cOLG:function(e,t,s){"use strict";s.r(t),s.d(t,"HomeTimeline",(function(){return bt}));var n=s("KEM+"),a=s.n(n),i=s("ERkP"),o=s("v6aA"),r=s("es0u"),c=s("wM4e"),l=s("hqKg"),h=s("QK5w"),m=s("G6rE"),u=s("oEGd");const p=Object(l.createSelector)(h.a,m.e.selectLoggedInUser,c.h,c.c,(e,t,s,n)=>({isInitialScreen:!e,loggedInUserAvatarURI:t&&t.profile_image_url_https,loggedInUserName:t&&t.name,useLatest:s,configurationFetchStatus:n}));var d=Object(u.c)(p),_=s("s14A"),f=s("dwig"),T=s("v//M"),w=s("0+qk"),v=s("15eg");s("kYxP");const g=(e,{inactivityThresholdMs:t,lastFrustrationEventTimestamp:s=0})=>{const n=60*e.getNumberValue("home_timeline_latest_timeline_min_time_to_autoswitch_minutes",720)*1e3,a=60*e.getNumberValue("home_timeline_latest_timeline_autoswitch_half_life_minutes",20160)*1e3,i=t||n;return Math.max(n,i*Math.pow(2,(s-Date.now())/a))},b=(e,t)=>{const s=60*e.getNumberValue("home_timeline_latest_timeline_max_time_to_autoswitch_minutes",10080)*1e3,n=e.getNumberValue("home_timeline_latest_timeline_autoswitch_threshold_multiplier",2);return Math.min(s,n*t)},E=(e,{useLatest:t,lastActiveOnLatestTimestamp:s,inactivityThresholdMs:n,lastFrustrationEventTimestamp:a})=>{if(e.isTrue("home_timeline_latest_timeline_switch_enabled")&&t){return(({lastActiveOnLatestTimestamp:e,inactivityThresholdMs:t})=>Date.now()-e>t)({lastActiveOnLatestTimestamp:s,inactivityThresholdMs:g(e,{inactivityThresholdMs:n,lastFrustrationEventTimestamp:a})})}return!1};var S=s("1YZw"),y=s("rxPX"),L=Object(y.a)().propsFromState(()=>({inactivityThresholdMs:c.e,autoSwitchTimestamp:c.b,lastFrustrationEventTimestamp:c.g})).propsFromActions(()=>({addToast:S.b,updateAutoSwitchTimestamp:c.i,updateBehavior:c.j,updateInactivityThresholdMs:c.k,updateLastFrustrationEventTimestamp:c.m})).withAnalytics(),x=(s("jQ/y"),s("3XMw")),F=s.n(x),I=s("mjJ+"),C=s("/yvb"),O=s("rHpw"),A=(s("IAdD"),s("Lsrn")),M=s("k/Ka");const j=(e={})=>Object(M.a)("svg",Object.assign({},e,{style:[A.a.root,e.style],viewBox:"0 0 36 36"}),i.createElement("g",null,i.createElement("path",{d:"M27.325 20.595c0 7.333-5.913 13.278-13.206 13.278S.912 27.928.912 20.595 6.825 7.317 14.12 7.317s13.205 5.944 13.205 13.278",fill:"#71C9F8"}),i.createElement("path",{d:"M24.576 20.682c0 5.802-4.678 10.506-10.45 10.506-5.77 0-10.448-4.704-10.448-10.506s4.678-10.506 10.45-10.506c5.77 0 10.448 4.704 10.448 10.506",fill:"#97E3FF"}),i.createElement("path",{d:"M18.98 20.94l-3.86-.583v-6.215c0-.552-.45-1-1-1s-1 .448-1 1v7.076c0 .06.023.112.033.17.007.042.012.082.025.123.026.084.063.158.11.23.022.038.044.075.072.11.05.06.11.11.173.158.042.03.08.06.128.086.065.034.133.055.204.074.04.01.072.035.114.04l4.704.71c.05.01.1.012.15.012.487 0 .914-.355.988-.85.08-.548-.295-1.058-.84-1.14z",fill:"#005FD1"}),i.createElement("path",{d:"M24.553 20.682c0 5.79-4.68 10.5-10.434 10.5S3.683 26.47 3.683 20.68c0-2.953 1.227-5.707 3.31-7.665l.674 1.127c.38.635 1.227.668 1.524.06l1.153-2.36 1.312-2.687c.24-.49-.104-1.067-.65-1.088l-2.988-.116-2.625-.1c-.678-.027-1.05.735-.67 1.37l.804 1.344C2.613 13.065.883 16.736.883 20.683c0 7.333 5.937 13.298 13.234 13.298s13.234-5.964 13.234-13.297h-2.8z",fill:"#1DA1F2"}),i.createElement("path",{d:"M35 13.36h-1.467v-1.34c0-.552-.448-1-1-1s-1 .448-1 1v1.34h-1.467c-.552 0-1 .45-1 1s.448 1 1 1h1.467v1.342c0 .552.448 1 1 1s1-.448 1-1v-1.34H35c.552 0 1-.45 1-1s-.448-1-1-1z",fill:"#FFAD1F"}),i.createElement("path",{d:"M28.646 4.138h-2.01v-2.01c0-.552-.448-1-1-1s-1 .448-1 1v2.01h-2.01c-.552 0-1 .448-1 1s.448 1 1 1h2.01v2.01c0 .552.448 1 1 1s1-.448 1-1v-2.01h2.01c.552 0 1-.448 1-1s-.447-1-1-1z",fill:"#F6809A"})));j.metadata={width:36,height:36};var k=j;const P=(e={})=>Object(M.a)("svg",Object.assign({},e,{style:[A.a.root,e.style],viewBox:"0 0 36 36"}),i.createElement("g",null,i.createElement("path",{d:"M35.508 15.41l-9.295-3.387L22.438 1.47c-.108-.302-.357-.48-.722-.495-.322.007-.604.22-.698.53l-3.293 10.71-9.132 3.805c-.285.118-.467.4-.46.708.007.308.203.58.492.686L17.92 20.8l3.775 10.552c.107.298.39.496.704.496h.016c.322-.007.604-.22.698-.53l3.293-10.712 9.132-3.803c.284-.118.466-.4.46-.708-.007-.308-.203-.58-.492-.686z",fill:"#61BCF6"}),i.createElement("path",{d:"M9.57 4.715l-2.906.065-.06-2.715C6.585 1.34 5.983.763 5.256.78 4.53.796 3.955 1.4 3.97 2.125l.063 2.715-2.747.062C.56 4.92-.016 5.522 0 6.248c.017.726.62 1.302 1.346 1.285l2.747-.062.062 2.716c.017.726.62 1.302 1.345 1.286.726-.016 1.302-.62 1.286-1.345l-.062-2.715 2.905-.066c.725-.017 1.3-.62 1.285-1.346-.017-.726-.62-1.302-1.346-1.285z",fill:"#F16888"}),i.createElement("path",{d:"M14.205 29.69l-1.65.036-.034-1.518c-.016-.726-.618-1.302-1.344-1.286s-1.302.62-1.286 1.345l.034 1.518-1.54.035c-.726.016-1.302.62-1.286 1.345.017.726.62 1.302 1.345 1.286l1.54-.034.034 1.518c.017.726.62 1.302 1.345 1.286.726-.016 1.302-.62 1.286-1.345l-.034-1.518 1.65-.037c.726-.016 1.302-.62 1.286-1.345-.016-.727-.62-1.303-1.345-1.286z",fill:"#FD9E1A"})));P.metadata={width:36,height:36};var R=P,D=s("3JQt"),z=s("M2x3");const N=(e={})=>Object(M.a)("svg",Object.assign({},e,{style:[A.a.root,e.style],viewBox:"0 0 24 24"}),i.createElement("g",null,i.createElement("path",{d:"M22.772 10.506l-5.618-2.192-2.16-6.5c-.102-.307-.39-.514-.712-.514s-.61.207-.712.513l-2.16 6.5-5.62 2.192c-.287.112-.477.39-.477.7s.19.585.478.698l5.62 2.192 2.16 6.5c.102.306.39.513.712.513s.61-.207.712-.513l2.16-6.5 5.62-2.192c.287-.112.477-.39.477-.7s-.19-.585-.478-.697zm-6.49 2.32c-.208.08-.37.25-.44.46l-1.56 4.695-1.56-4.693c-.07-.21-.23-.38-.438-.462l-4.155-1.62 4.154-1.622c.208-.08.37-.25.44-.462l1.56-4.693 1.56 4.694c.07.212.23.382.438.463l4.155 1.62-4.155 1.622zM6.663 3.812h-1.88V2.05c0-.414-.337-.75-.75-.75s-.75.336-.75.75v1.762H1.5c-.414 0-.75.336-.75.75s.336.75.75.75h1.782v1.762c0 .414.336.75.75.75s.75-.336.75-.75V5.312h1.88c.415 0 .75-.336.75-.75s-.335-.75-.75-.75zm2.535 15.622h-1.1v-1.016c0-.414-.335-.75-.75-.75s-.75.336-.75.75v1.016H5.57c-.414 0-.75.336-.75.75s.336.75.75.75H6.6v1.016c0 .414.335.75.75.75s.75-.336.75-.75v-1.016h1.098c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"})));N.metadata={width:24,height:24};var H=N;const U=F.a.j681ac0d,V=F.a.g8220472,B=F.a.ccdd3766,W=F.a.c41ecf3c,J=F.a.d18aa6d4,q=F.a.bc52b0cd,K=F.a.j6382fe9,$=F.a.f5f4ea93,G=F.a.e4acfd11;class Q extends i.PureComponent{constructor(...e){super(...e),a()(this,"_renderActionMenu",e=>{const{useLatest:t}=this.props,s=t?J:W,n=t?k:R;return i.createElement(I.a,{DescriptionIcon:n,description:s,descriptionStyle:X.description,isFixed:!0,items:this._getActionMenuItems(),onCloseRequested:e})}),a()(this,"_getActionMenuItems",()=>{const{useLatest:e}=this.props,t=e?G:$;return[{text:e?q:K,onClick:this._handleTimelineSwitch,Icon:D.a,subText:t},{link:"/settings/content_preferences",text:U,onClick:this._handleContentPreferences,Icon:z.a}]}),a()(this,"_handleTimelineSwitch",e=>{const{onToggle:t}=this.props;e(),t()}),a()(this,"_handleContentPreferences",e=>{const{onContentPreferencesSelect:t}=this.props;e(),t()})}render(){const{useLatest:e,onPress:t}=this.props,s=e?V:B;return i.createElement(C.a,{accessibilityLabel:s,icon:i.createElement(H,null),onPress:t,pullRight:!0,renderMenu:this._renderActionMenu,type:"text"})}}const X=O.a.create(e=>({description:{fontSize:e.fontSizes.large,color:e.colors.text,textAlign:"center",fontWeight:e.fontWeights.bold}}));var Y=Q,Z=s("aWzz");const ee=F.a.e4c6d14c,te=F.a.bffa2da7;class se extends i.Component{constructor(...e){super(...e),a()(this,"_handleToggle",()=>{const{updateBehavior:e,useLatest:t,addToast:s,analytics:n,updateInactivityThresholdMs:a,inactivityThresholdMs:i,autoSwitchTimestamp:o,updateAutoSwitchTimestamp:r,updateLastFrustrationEventTimestamp:c,lastFrustrationEventTimestamp:l}=this.props;this.context.viewport.scrollToTop();if(((e,t)=>{if(!t)return!1;const s=1e3*e.getNumberValue("home_timeline_latest_timeline_threshold_to_increase_autoswitch_seconds",60);return Date.now()-t<s})(this.context.featureSwitches,o)){const e=g(this.context.featureSwitches,{inactivityThresholdMs:i,lastFrustrationEventTimestamp:l});a({inactivityThresholdMs:b(this.context.featureSwitches,e)}),c({lastFrustrationEventTimestamp:Date.now()})}let h={};if(o){h={duration_ms:Date.now()-o}}n.scribe({component:"customize",element:t?"see_top":"see_latest",action:"click",data:h}),o&&r({autoSwitchTimestamp:null});const m=t?ee:te;e({useLatest:!t}).then(()=>{s({text:m})})}),a()(this,"_handleSwitchPress",()=>{const{analytics:e}=this.props;e.scribe({section:"navigation_bar",element:"customize_button",action:"click"})}),a()(this,"_handleContentPreferencesSelect",()=>{const{analytics:e}=this.props;e.scribe({component:"customize",element:"see_preferences",action:"click"})})}render(){const{useLatest:e}=this.props;return i.createElement(Y,{onContentPreferencesSelect:this._handleContentPreferencesSelect,onPress:this._handleSwitchPress,onToggle:this._handleToggle,useLatest:e})}}a()(se,"contextTypes",{viewport:Z.object,featureSwitches:Z.any});var ne=L(se),ae=(s("JtPf"),s("zb92")),ie=s("2dXj"),oe=Object(y.a)().propsFromState(()=>({loggedInUser:m.e.selectLoggedInUser})).adjustStateProps(({loggedInUser:e})=>({userAvatarURI:e&&e.profile_image_url_https,userName:e&&e.name})),re=s("N5qz"),ce=s("MWbm"),le=s("cHvH"),he=s("5mJL"),me=s("DNho"),ue=s("XP29"),pe=s("t62R"),de=s("cjZk"),_e=s("3rWK"),fe=s("ll3R"),Te=s("pNJr"),we=s("J0mu");const ve=F.a.bea869b3,ge=F.a.e349147b,be=O.a.create(e=>({root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},avatarColumn:{flexGrow:1,minWidth:32,maxWidth:e.spaces.xxLarge},avatar:{width:"100%"},body:{flexDirection:"column",flexGrow:1},fakeInput:{paddingVertical:`calc(${e.spaces.xSmall} + ${e.spaces.micro})`,paddingHorizontal:e.spaces.micro},toolbar:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",marginRight:e.spaces.micro,marginTop:e.spaces.xSmall},toolbarSection:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:"1.5em",marginHorizontal:`calc(${e.spaces.xSmall} - ${e.spaces.micro})`,width:"1.5em"},firstIcon:{marginLeft:0},lastIcon:{marginRight:0},separator:{width:"1px",backgroundColor:e.colors.gray300,height:e.fontSizes.jumbo,marginRight:e.spaces.xSmall,marginLeft:`calc(${e.spaces.xSmall} - 2px)`},tweetButton:{marginLeft:e.spaces.xSmall}}));var Ee=oe(({userAvatarURI:e})=>i.createElement(le.a,null,({windowWidth:t})=>{const s=!re.a.isOneColumnSquishedLayout(t);return i.createElement(he.a,{avatarCell:i.createElement(me.a.Consumer,null,({avatarSize:t})=>i.createElement(ue.a,{size:t,style:be.avatar,uri:e})),avatarCellStyle:be.avatarColumn,cellStyle:be.body,style:be.root},i.createElement(pe.c,{color:"gray600",numberOfLines:1,size:"large",style:be.fakeInput},ge),i.createElement(ce.a,{style:be.toolbar},i.createElement(ce.a,{style:be.toolbarSection},i.createElement(de.a,{style:[be.icon,be.firstIcon]}),i.createElement(_e.a,{style:be.icon}),s?i.createElement(fe.a,{style:be.icon}):null,i.createElement(Te.a,{style:be.icon}),s?i.createElement(we.a,{style:[be.icon,be.lastIcon]}):null),i.createElement(ce.a,{style:be.toolbarSection},i.createElement(C.a,{disabled:!0,style:be.tweetButton,type:"primary"},ve))))})),Se=Object(ae.a)({loader:()=>(ie.a.preload()||Promise.resolve()).then(()=>Promise.all([s.e(0),s.e(3),s.e(8),s.e(6),s.e(63)]).then(s.bind(null,"M5JI"))),renderPlaceholder:()=>i.createElement(Ee,null)});const ye=()=>window.performance&&"function"==typeof window.performance.now;var Le=s("yoO3"),xe=s("aeN7"),Fe=Object(y.a)().propsFromState(()=>({inactivityThresholdMs:c.e,lastActiveOnLatestTimestamp:c.f,lastFrustrationEventTimestamp:c.g})).propsFromActions(()=>({addToast:S.b,updateAutoSwitchTimestamp:c.i,updateBehavior:c.j,updateLastActiveOnLatestTimestamp:c.l})).withAnalytics(),Ie=s("QIgh"),Ce=s("8UdT"),Oe=s("iu0J"),Ae=s("AP4B"),Me=s("ezF+"),je=s("VPAj"),ke=s("0KEI"),Pe=s("Zejx");const Re=(e,t)=>t.unhydratedTopics;var De=Object(y.a)().propsFromState(()=>({topics:Object(l.createSelector)(Re,Pe.a.selectAll,(e,t)=>e.map(e=>{const s=t[e.topicId];return s?Object.assign({},s,{clientEventInfo:e.clientEventInfo}):void 0}).filter(Boolean))})).propsFromActions(()=>({createLocalApiErrorHandler:Object(ke.d)("TOPIC_COLLECTION_CONTEXT"),follow:Pe.a.follow,unfollow:Pe.a.unfollow})).withAnalytics(),ze=s("Rp9C"),Ne=s("uavX"),He=s("aV/s");const Ue=F.a.ge8f3043,Ve=F.a.aa576cbf;class Be extends i.Component{constructor(...e){super(...e),a()(this,"state",{currentSlide:0}),a()(this,"_handleCarouselChange",e=>this.setState({currentSlide:e})),a()(this,"_handleFollow",e=>()=>{const{analytics:t,createLocalApiErrorHandler:s,follow:n}=this.props,a=this._getScribeDataForTopic(e),{component:i,element:o}=e.clientEventInfo||{};n(e.id).catch(s()),t.scribe({component:i,element:o,action:"follow",data:a})}),a()(this,"_handleFocus",e=>()=>{this.state.currentSlide!==e&&this._handleCarouselChange(e)}),a()(this,"_handleUnfollow",e=>()=>{const{analytics:t,createLocalApiErrorHandler:s,unfollow:n}=this.props,a=this._getScribeDataForTopic(e),{component:i,element:o}=e.clientEventInfo||{};n(e.id).catch(s()),t.scribe({component:i,element:o,action:"unfollow",data:a})})}componentDidMount(){const{analytics:e,topics:t}=this.props;e.scribeAction("impression"),t.forEach(t=>{const s=this._getScribeDataForTopic(t),{component:n,element:a}=t.clientEventInfo||{};e.scribe({component:n,element:a,action:"impression",data:s})})}render(){const{currentSlide:e}=this.state,t=this._getNumberOfRows();return i.createElement(ce.a,{style:[We.root,{height:50*t*this._getScaleValue()}]},i.createElement(Ne.a,{currentSlide:e,onChange:this._handleCarouselChange,showNavButtonsOnHover:!0,slidesToShow:1.8},this._renderTopicPills()))}_renderTopicPills(){const{topics:e}=this.props,t=this._getNumberOfRows(),s=[];for(let n=0,a=0;n<e.length;n+=t,a++){const o=e.slice(n,n+t),r=i.createElement(ce.a,{key:a,onFocus:this._handleFocus(a),style:We.column},o.map(e=>i.createElement(He.a,{accessibilityLabel:e.following?Ve({topicName:e.name}):Ue({topicName:e.name}),key:e.id,mode:e.following?"active":"expand",onClick:e.following?this._handleUnfollow(e):this._handleFollow(e),selected:e.following,style:We.pill,text:e.name})));s.push(r)}return s}_getScaleValue(){const{theme:{scale:e,scales:t}}=O.a;return t[e]}_getNumberOfRows(){const{numberOfRows:e,topics:t}=this.props,s=t.length;return e||(s<8?1:s<12?2:3)}_getScribeDataForTopic(e){return{items:[ze.a.forTopic(e.id,e.clientEventInfo)]}}}const We=O.a.create(e=>({root:{marginVertical:e.spaces.xxSmall,minHeight:e.spaces.xLarge,overflow:"hidden",width:"100%"},column:{marginLeft:e.componentDimensions.gutterHorizontal},pill:{marginVertical:e.spaces.xxSmall,textOverflow:"ellipsis"}}));var Je=De(Be),qe=Me.d(Me.f({component:Je,createProps:({entry:e})=>{const t=e.content.rowCount?parseInt(e.content.rowCount,10):void 0;return{numberOfRows:isNaN(t)?void 0:t,unhydratedTopics:e.content.topics}},isFocusable:Object(je.a)(!0)})),Ke=s("aITJ");var $e=Object.assign({},Object(Ie.a)({tweetDismissable:!0,shouldSelfThreadIncludeAvatar:!0,withCarouselTimelineModule:Ke.a.isMobileOS()}),Ae.a,{[Ce.b.EventSummary]:Object(Oe.a)({errorContext:"HOME_TIMELINE_SCREEN"}),[Ce.b.TopicCollection]:qe}),Ge=s("MDbM"),Qe=s("FIs5");const Xe=F.a.d2c66f1f,Ye=F.a.c3fbf1da,Ze=F.a.bf17ded9;var et=({onImpression:e})=>i.createElement(Qe.a,{buttonLink:"/i/connect_people",buttonText:Ze,header:Xe,message:Ye,onImpression:e}),tt=s("/NU0"),st=s("EUHl"),nt=s("fTQJ"),at=s("WA1W");const it=F.a.f089620b,ot=F.a.e4c6d14c,rt={count:void 0};class ct extends i.Component{constructor(e,t){super(e,t),a()(this,"_handleEntriesUpdate",({entries:e,fetchStatus:t})=>{const{isInitialScreen:s,recordTTFT:n,useLatest:a,updateLastActiveOnLatestTimestamp:i}=this.props;if(t===Ge.a.FAILED&&(this._shouldRecordTTFT=!1),this._shouldRecordTTFT&&s&&e.length){const t=e.some(({type:e})=>e===Ce.b.Tweet);this._shouldRecordTTFT=!1,t&&n()}if(this._latestTimelineSwitchEnabled&&a){i(Date.now())}}),a()(this,"_renderEmptyTimeline",()=>i.createElement(et,{onImpression:this._handleEmptyHtlImpression})),a()(this,"_handleEmptyHtlImpression",()=>{const{analytics:e}=this.props;e.scribe({component:"empty_message",action:"impression"})}),this._shouldRecordTTFT=!0,this._latestTimelineSwitchEnabled=this.context.featureSwitches.isTrue("home_timeline_latest_timeline_switch_enabled"),this._checkIsAutoSwitchRequired()}componentDidMount(){this._requiresAutoSwitch&&(this._performAutoSwitch(),this._requiresAutoSwitch=!1)}render(){if(this._requiresAutoSwitch)return null;const{useLatest:e,timelineRef:t}=this.props,s=this._latestTimelineSwitchEnabled&&e?at.a:at.b;return i.createElement(nt.a,{entryConfiguration:$e,fetchTopOptions:rt,module:s,newTweetsPillMode:st.a.URT,onEntriesUpdate:this._handleEntriesUpdate,renderEmptyState:this._renderEmptyTimeline,timelineRef:t,title:it})}_performAutoSwitch(){const{updateBehavior:e,addToast:t,analytics:s,updateAutoSwitchTimestamp:n,lastActiveOnLatestTimestamp:a,inactivityThresholdMs:i,lastFrustrationEventTimestamp:o}=this.props,r=Object(tt.a)(a)?((e,{lastActiveOnLatestTimestamp:t,inactivityThresholdMs:s,lastFrustrationEventTimestamp:n})=>({duration_ms:Date.now()-t,event_value:g(e,{inactivityThresholdMs:s,lastFrustrationEventTimestamp:n})}))(this.context.featureSwitches,{lastActiveOnLatestTimestamp:a,inactivityThresholdMs:i,lastFrustrationEventTimestamp:o}):void 0;s.scribe({action:"automatic_switch_to_home",data:r}),n({autoSwitchTimestamp:Date.now()}),e({useLatest:!1}).then(()=>{t({text:ot})})}_checkIsAutoSwitchRequired(){const{useLatest:e,lastActiveOnLatestTimestamp:t,inactivityThresholdMs:s,lastFrustrationEventTimestamp:n}=this.props;this._requiresAutoSwitch=!!Object(tt.a)(t)&&E(this.context.featureSwitches,{useLatest:e,lastActiveOnLatestTimestamp:t,inactivityThresholdMs:s,lastFrustrationEventTimestamp:n})}}a()(ct,"defaultProps",{recordTTFT:xe.e}),a()(ct,"contextType",o.a);var lt=Fe(ct),ht=s("7JQg"),mt=s("VS6U"),ut=s("Es6L"),pt=s("LsPn"),dt=s("0yYu"),_t=s("mw9i");const ft=F.a.i5f7b6b8,Tt=F.a.d126cb7c,wt=F.a.ha8209bb,vt={page:"home"},gt={page:"home_latest"};class bt extends i.Component{constructor(e,t){super(e,t),a()(this,"_unmounted",!1),a()(this,"_renderTimeline",()=>{const{useLatest:e,isInitialScreen:t}=this.props;return i.createElement(_.a,null,i.createElement(lt,{isInitialScreen:t,timelineRef:this._setTimelineRef,useLatest:e}))}),a()(this,"_renderPrimaryContent",()=>{const{history:e,location:t,configurationFetchStatus:s}=this.props,n=i.createElement(w.a,{history:e});return i.createElement(i.Fragment,null,Object(ut.a)()?i.createElement(i.Fragment,null,i.createElement(Se,{history:e,location:t}),i.createElement(dt.a,null)):null,i.createElement(f.a,{component:_t.a,fab:n},Ke.a.isKaiOS()?i.createElement(pt.a,{leftText:ft,onLeftClick:this._handleSoftLeftClick}):null,i.createElement(T.a,{fetchStatus:s,render:this._renderTimeline})))}),a()(this,"_handleSoftLeftClick",()=>{const{history:e}=this.props;e.push("/account")}),a()(this,"_handleTabRefresh",()=>{this._timeline&&this._timeline.refreshOrGoTop()}),a()(this,"_handleWindowFocus",()=>{this._timeline&&this._timeline.fetchTop({onlyIfStale:!0})}),a()(this,"_setTimelineRef",e=>{this._timeline=e}),this._latestTimelineSwitchEnabled=this.context.featureSwitches.isTrue("home_timeline_latest_timeline_switch_enabled")}componentDidMount(){if(window.addEventListener("focus",this._handleWindowFocus),this.context.featureSwitches.isTrue("responsive_web_framerate_tracking_home_enabled")){const{isEnabled:e}=Object(v.a)(this.context.featureSwitches),t=`${e?"home_scroller_v3":"home"}${Ke.a.isDesktopOS()?"":"_mobile"}`;(ye()?s.e(274).then(s.bind(null,"Iid0")).then(({default:e})=>e):Promise.resolve(void 0)).then(e=>{!this._unmounted&&e&&(this._fpsTracking=e({reportNamespace:t}))})}}componentWillUnmount(){this._unmounted=!0,window.removeEventListener("focus",this._handleWindowFocus),this._fpsTracking&&this._fpsTracking.stop()}render(){const{useLatest:e,history:t}=this.props,s=this._latestTimelineSwitchEnabled?i.createElement(ne,{useLatest:e}):void 0,n=this._latestTimelineSwitchEnabled&&e?Tt:wt;return i.createElement(ht.b,{namespace:this._getScribeNamespace()},i.createElement(Le.a,null,i.createElement(mt.a,{history:t,onTabRefresh:this._handleTabRefresh,primaryContent:this._renderPrimaryContent,rightControl:s,sidebarContent:i.createElement(r.a,null),title:n})))}_getScribeNamespace(){const{useLatest:e}=this.props;return e?gt:vt}}a()(bt,"contextType",o.a);t.default=d(bt)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.HomeTimeline.69aaf465.js.map