(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"45mF":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("1YZw"),s=a("pXBW"),i=a("3XMw"),o=a.n(i),r=a("SrIh");const l=o.a.a5d4fda0,d=(e=l,t=!0)=>({customErrorHandler:a=>{const{context:i}=a;return!a instanceof s.a&&(a.message=`Strato error occurred in ${i.id}: ${i.action}`),Object(r.a)(a,{extra:{context:i,isStrato:!0}}),t?Object(n.b)({text:e}):[]}})},"6XNv":function(e,t,a){"use strict";a("IAdD"),a("kYxP");var n=a("KEM+"),s=a.n(n),i=a("ERkP"),o=a("t62R"),r=a("piX5"),l=a("FG+G"),d=a("rHpw"),c=(a("aWzz"),a("k/Ka")),h=a("MWbm");const u=i.forwardRef((e,t)=>Object(c.a)("select",Object.assign({},e,{ref:t}))),p=e=>Object(c.a)("option",e);class m extends i.PureComponent{constructor(...e){super(...e),s()(this,"_selectRef",i.createRef()),s()(this,"state",{isFocused:!1}),s()(this,"_handleChange",e=>{const{onChange:t,withEmptyOption:a}=this.props,{selectedIndex:n,value:s}=e.target;t&&t(s,n-(a?1:0))}),s()(this,"_handleBlur",e=>{const{onBlur:t}=this.props;this.setState({isFocused:!1}),t&&t()}),s()(this,"_handleFocus",e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t()})}componentDidMount(){this.props.autofocus&&this._selectRef&&this._selectRef.current&&this._selectRef.current.focus()}render(){const{style:e,disabled:t,options:a,value:n,label:s,hasError:o,errorText:d,helperText:c,testID:m,withEmptyOption:_}=this.props,{isFocused:b}=this.state;return i.createElement(i.Fragment,null,i.createElement(h.a,{style:[r.a.border,g.container,t&&r.a.disabled,b&&r.a.focusedBorderValid,(o||d)&&r.a.invalidBorderColor,b&&(o||d)&&r.a.focusedBorderInvalid,e]},this._renderLabel(),i.createElement(u,{accessibilityLabel:s,disabled:t,id:s,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,ref:this._selectRef,style:[g.select,t&&r.a.disabled],testID:m||"",value:n},_?i.createElement(p,{disabled:!0,style:g.option,value:""}):null,a.map(e=>{const{disabled:t,label:a,value:n}=e;return i.createElement(p,{disabled:t,key:`${a}-${n}`,style:g.option,value:n},a)})),i.createElement(l.a,{style:[g.dropdownCaret,b&&r.a.validColor,(o||d)&&r.a.invalidColor]})),c?this._renderHelperText():null,d?this._renderErrorText():null)}_renderLabel(){const{errorText:e,hasError:t,label:a}=this.props,{isFocused:n}=this.state;return i.createElement(o.c,{color:t||e?"red500":n?"primary":"gray600",for:a,style:g.label},a)}_renderHelperText(){return i.createElement(h.a,{accessibilityLiveRegion:"polite"},i.createElement(o.c,{color:"gray600",style:g.helperText},this.props.helperText))}_renderErrorText(){return i.createElement(h.a,{accessibilityLiveRegion:"polite"},i.createElement(o.c,{color:"red500",style:g.helperText},this.props.errorText))}}s()(m,"defaultProps",{disabled:!1,autofocus:!1,withEmptyOption:!1}),m.propTypes={};const g=d.a.create(e=>({container:{backgroundColor:e.colors.cellBackground},dropdownCaret:{color:e.colors.gray600,height:"1.5em",pointerEvents:"none",position:"absolute",marginTop:"-0.75em",top:"50%",right:e.spaces.xSmall},label:{position:"absolute",fontSize:e.fontSizes.small,paddingHorizontal:e.spaces.xxSmall,paddingTop:e.spaces.xxSmall,pointerEvents:"none"},option:{backgroundColor:e.colors.navigationBackground},select:{appearance:"none",backgroundColor:"transparent",borderRadius:e.borderWidths.none,borderWidth:e.borderWidths.none,color:e.colors.text,cursor:"pointer",fontSize:e.fontSizes.large,margin:0,marginTop:e.spaces.xxSmall,outlineStyle:"none",padding:0,paddingTop:e.spaces.medium,paddingBottom:e.spaces.xxSmall,paddingHorizontal:e.spaces.xxSmall},helperText:{fontSize:e.fontSizes.small,paddingHorizontal:e.spaces.xxSmall,paddingTop:e.spaces.micro}}));t.a=m},LT7J:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return m}));a("JtPf"),a("kYxP");var n=a("j7tW"),s=a("1YZw"),i=a("rxPX"),o=a("0KEI"),r=a("0pUJ"),l=a("RqPI"),d=a("XOJV"),c=a("G6rE"),h=a("HAhZ"),u=a("ymux");const p="conversation_muted_education",m="hide_reply_author_education",g=(e,t)=>Object(h.c)(e,p),_=(e,t)=>Object(h.c)(e,m),b=e=>t=>Promise.all([t(d.a.delete(e)),t(Object(u.a)({focalTweetId:e}).deleteTimeline()),t(Object(u.a)({focalTweetId:e,conversationTreeEnabled:!0}).deleteTimeline())]);t.c=Object(i.a)().propsFromState(()=>({userCountry:l.l,shouldShowMuteEducationTip:g,shouldShowHideReplyTip:_})).propsFromActions(()=>({addTip:h.a,addToast:s.b,block:c.e.block,createLocalApiErrorHandler:Object(o.d)("TWEET_CURATION_ACTION_SHEET_CONTAINER"),deleteTweet:b,dismissUserFromConversation:u.b,follow:c.e.follow,hideReply:d.a.hideReply,mute:r.a,muteTweet:d.a.mute,ouch:d.a.ouch,pin:n.a,removeTag:d.a.removeTag,unblock:c.e.unblock,unfollow:c.e.unfollow,unhideReply:d.a.unhideReply,unmute:c.e.unmute,unmuteTweet:d.a.unmute,unpin:n.c})).withAnalytics()},MXY2:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("3XMw"),s=a.n(n);const i=s.a.bea869b3,o=s.a.f70a36d0,r=s.a.d17df547,l=s.a.h735a98d,d=e=>{const t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?l:t?r:e.isThread?o:i}},Oib4:function(e,t,a){"use strict";a("IAdD");var n=a("ERkP"),s=a("Lsrn"),i=a("k/Ka");const o=(e={})=>Object(i.a)("svg",Object.assign({},e,{style:[s.a.root,e.style],viewBox:"0 0 24 24"}),n.createElement("g",null,n.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm.025 16.468c-.708 0-1.28-.574-1.28-1.28 0-.71.572-1.282 1.28-1.282.708 0 1.28.573 1.28 1.28.002.708-.57 1.282-1.28 1.282zM14.47 7.636l-1.815 6.098c-.063.212-.258.357-.48.357h-.298c-.222 0-.416-.145-.48-.356L9.583 7.636c-.045-.152-.016-.316.08-.442.093-.127.24-.2.4-.2h3.927c.157 0 .306.073.4.2.094.126.124.29.08.442z"})));o.metadata={width:24,height:24},t.a=o},Ub51:function(e,t,a){"use strict";a("IAdD"),a("JtPf"),a("Qavd"),a("DZ+c"),a("x4t0"),a("MvUL"),a("kYxP");var n=a("97Jx"),s=a.n(n),i=a("KEM+"),o=a.n(i),r=a("ERkP"),l=a("6/RC"),d=(a("Ysgh"),a("wpu3")),c=a("v6aA");const h=Object.freeze({all:"all",community:"community",by_invitation:"by_invitation",followers:"followers"});var u=a("3XMw"),p=a.n(u),m=a("MWbm"),g=a("t62R"),_=a("CKsB"),b=a("/yvb"),y=a("rHpw"),f=a("Zg3A"),x=a("wz7L"),C=a("Lsrn"),v=a("k/Ka");const w=(e={})=>Object(v.a)("svg",Object.assign({},e,{style:[C.a.root,e.style],viewBox:"0 0 24 24"}),r.createElement("g",null,r.createElement("path",{d:"M10.43 12.24c-1.37 0-2.89-.15-3.87-1.26-.82-.95-1.09-2.39-.81-4.43C6.13 3.7 7.88 2 10.43 2s4.3 1.7 4.68 4.55c.27 2.04.01 3.49-.81 4.42-.98 1.12-2.51 1.27-3.87 1.27zm0-8.73c-2.39 0-3.03 2.03-3.19 3.24-.21 1.56-.06 2.65.45 3.23.46.53 1.28.75 2.73.75 1.46 0 2.28-.22 2.74-.75.51-.58.66-1.67.45-3.23-.16-1.21-.79-3.24-3.18-3.24zm2.01 18.99H4.22c-.7 0-1.33-.3-1.75-.83-.43-.54-.57-1.26-.4-1.95.88-3.55 4.31-6.03 8.34-6.03.42 0 .75.34.75.75 0 .42-.34.75-.75.75-3.34 0-6.17 2.01-6.88 4.89-.06.25-.02.49.12.66.13.16.32.25.56.25h8.22c.42 0 .75.34.75.75.01.42-.32.76-.74.76zm9.15-10.87l-4.2 8.46c-.01.03-.02.05-.04.07-.02.06-.06.11-.1.15-.05.05-.1.09-.15.13h-.01c-.06.04-.12.06-.19.08-.07.02-.13.03-.2.03-.05 0-.11 0-.17-.02-.06-.01-.11-.03-.16-.06-.06-.03-.12-.07-.18-.12-.01-.01-.03-.02-.04-.03l-3.08-3.27c-.28-.3-.27-.78.04-1.06.3-.29.77-.27 1.06.03l2.34 2.48 3.74-7.53c.18-.37.63-.52 1-.34.37.17.52.63.34 1z"}),r.createElement("path",{d:"M17.1 20.44c.05-.04.1-.08.15-.13 0 .01-.02.03-.03.04-.04.04-.08.06-.12.09z"})));w.metadata={width:24,height:24};var T=w,S=a("EweD");const E=p.a.g6185a9e,I=p.a.g2d04222,R=p.a.cfda7b45,k=p.a.baffe39a,M=p.a.jc9ee047,A=p.a.af293dc2,B=p.a.h1053f7e,D=p.a.cfd2f35d,O=y.a.create(e=>({root:{flexDirection:"column",paddingTop:e.spaces.small,paddingBottom:e.spaces.xxSmall,borderRadius:e.borderRadii.xLarge},popover:{maxWidth:5*e.spacesPx.jumbo},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.small,marginBottom:e.spaces.xSmall},menuRow:{flexDirection:"row",paddingTop:e.spaces.xSmall,paddingBottom:e.spaces.xSmall,alignItems:"center",borderRadius:e.borderRadii.small},cancelButton:{marginHorizontal:e.spaces.small,marginVertical:e.spaces.small}}));var P=e=>{const{dismiss:t,isModal:a,value:n}=e,{featureSwitches:s}=r.useContext(c.a),i=t=>()=>{e.onChange(t),e.dismiss()},o=s.isTrue("conversation_controls_flexible_participation_enabled"),l=s.isTrue("conversation_controls_my_followers_enabled");return r.createElement(m.a,{accessibilityRole:"dialog","aria-describedby":"conversation-controls-details","aria-labelledby":"conversation-controls-title",style:[O.root,a?O.modal:O.popover]},r.createElement(m.a,{style:O.title},r.createElement(g.c,{nativeID:"conversation-controls-title",weight:"bold"},E),r.createElement(g.c,{color:"gray600",nativeID:"conversation-controls-details",size:"normal"},o?R:I)),r.createElement(m.a,null,r.createElement(_.a,{Icon:f.a,actionText:k,isSelected:h.all===n,onClick:i(h.all),selectable:!0,style:O.menuRow,withIconAsThumbnail:!0}),l?r.createElement(_.a,{Icon:x.a,actionText:M,isSelected:h.followers===n,onClick:i(h.followers),selectable:!0,style:O.menuRow,withIconAsThumbnail:!0}):null,r.createElement(_.a,{Icon:T,actionText:A,isSelected:h.community===n,onClick:i(h.community),selectable:!0,style:O.menuRow,withIconAsThumbnail:!0}),r.createElement(_.a,{Icon:S.a,actionText:B,isSelected:h.by_invitation===n,onClick:i(h.by_invitation),selectable:!0,style:O.menuRow,withIconAsThumbnail:!0}),e.isModal?r.createElement(b.a,{key:"button_cancel",onPress:t,style:O.cancelButton,type:"neutral"},D):null))},L=a("PmiK"),F=a("Irs7"),H=a("efqG"),j=a("DlMI"),N=a("gBde"),z=a("lBmi"),V=a("gUPl");const U=r.createElement(j.a,null),W=r.createElement(N.a,null),K=r.createElement(z.a,null),G=r.createElement(V.a,null),q=Object.freeze({all:{icon:U,label:p.a.i8ea6d4e},followers:{icon:K,label:p.a.aaa3ea08},community:{icon:G,label:p.a.ec5a4a25},by_invitation:{icon:W,label:p.a.b4543009}});var X=Object(F.a)(e=>{const{icon:t,label:a}=q[e.value],{analytics:n,disabled:i,hidden:o}=e,l=r.useCallback(e=>{n.scribe({element:"conversation_control",action:"click"})},[n]),d=r.useCallback((t,a)=>r.createElement(P,s()({},e,{dismiss:t,isModal:"sheet"===a})),[e]),c=["community","by_invitation"].includes(e.value);return r.createElement(r.Fragment,null,r.createElement(m.a,{style:[$.container,o&&$.hidden]},r.createElement(H.a,{disabled:i,renderContent:d},r.createElement(b.a,{disabled:i,icon:t,onPress:l,size:"small",style:$.button,type:"text"},a))),r.createElement(m.a,{style:[$.separator,o&&$.hidden]}),c?r.createElement(L.a,null):null)});const $=y.a.create(e=>({button:{paddingHorizontal:e.spaces.xxSmall},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.xSmall},separator:{height:"1px",backgroundColor:e.colors.borderColor,width:"100%"},hidden:{visibility:"hidden"}}));var J=a("krmn"),Y=a("oEoC"),Q=a("cIoY"),Z=a("w3n3"),ee=a("MLl7"),te=a("DtVZ"),ae=a("1auM"),ne=a("07FG"),se=a("Q8CU"),ie=a("QbaN"),oe=a("VPdC"),re=a("p+r5"),le=a("GWvE");class de extends r.Component{constructor(...e){super(...e),o()(this,"_setInputRef",e=>{this._inputRef=e})}render(){const{autoFocus:e,defaultValue:t,editable:a,label:n,onChange:s,name:i}=this.props;return r.createElement(m.a,{style:ce.root},r.createElement(re.a,{autoCapitalize:"none",autoCorrect:!1,autoFocus:e,defaultValue:t,editable:a,label:n,maxLength:25,name:i,onChange:s,ref:this._setInputRef,spellCheck:"false",style:ce.formTextInput}))}get value(){return this._inputRef&&this._inputRef.getValue()}get isValid(){const{optional:e}=this.props;return!this.value&&e||this.value&&!Object(le.a)(this.value)&&this._inputRef&&this._inputRef.isValidLength()}}o()(de,"defaultProps",{autoFocus:!1,editable:!0,optional:!1});const ce=y.a.create(e=>({root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.xLarge},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.xSmall}}));var he=de,ue=a("mtvn"),pe=a("6XNv");class me extends r.PureComponent{render(){const{editable:e,label:t,last:a,max:n,min:s,onChange:i,value:o}=this.props,l=!e||s===n,d=o.toString(),c=Object(ue.a)(s,n+1).map(e=>({label:""+p.a.ia24dc8c(e),value:""+e}));return r.createElement(pe.a,{disabled:l,label:t,onChange:i,options:c,style:[ge.selector,!a&&ge.rightMargin],value:d})}}o()(me,"defaultProps",{last:!1});const ge=y.a.create(e=>({rightMargin:{marginRight:e.spaces.medium},selector:{flexGrow:1}}));var _e=me;const be=p.a.caf8edc4,ye=p.a.g93586be,fe=p.a.d073b644,xe=p.a.a2f0728e;class Ce extends r.Component{constructor(e,t){super(e,t),o()(this,"_handleDaysChange",e=>{const t=parseInt(e,10);this.setState(e=>{const{hours:a,minutes:n}=e.duration,s=0===t&&0===a&&0===n?1:7===t?0:a;return{duration:{days:t,hours:s,minutes:7===t?0:0===t&&0===s&&n<5?5:n}}})}),o()(this,"_handleHoursChange",e=>{const t=parseInt(e,10);this.setState(e=>{const{days:a,minutes:n}=e.duration;return{duration:{days:a,hours:t,minutes:0===a&&0===t&&n<5?5:n}}})}),o()(this,"_handleMinutesChange",e=>{const t=parseInt(e,10);this.setState(e=>{const{days:a,hours:n}=e.duration;return{duration:{days:a,hours:n,minutes:t}}})}),this.state={duration:e.initialDuration}}render(){const{style:e,isActive:t}=this.props;return r.createElement(m.a,{style:e},r.createElement(g.c,{color:"normal",style:ve.durationLabel},t?be:""),this._renderPicker())}_renderPicker(){const{editable:e,isActive:t}=this.props,{duration:{days:a,hours:n,minutes:s}}=this.state;return r.createElement(m.a,{style:ve.durationControls},r.createElement(_e,{editable:e&&t,label:ye,max:7,min:0,onChange:this._handleDaysChange,value:a}),r.createElement(_e,{editable:e&&t,label:fe,max:7===a?0:23,min:0,onChange:this._handleHoursChange,value:n}),r.createElement(_e,{editable:e&&t,label:xe,last:!0,max:7===a?0:59,min:0===a&&0===n?5:0,onChange:this._handleMinutesChange,value:s}))}get duration(){return this.state.duration}}o()(Ce,"defaultProps",{editable:!0,initialDuration:{days:1,hours:0,minutes:0}});const ve=y.a.create(e=>({durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.xxSmall}}));var we=Ce,Te=a("iY63"),Se=a("jtO7");const Ee=p.a.g589c2e1,Ie=p.a.a1e6c3a1,Re=p.a.a739e006,ke=p.a.d89a5b92,Me=p.a.c2a8118d,Ae=p.a.a8ede1de;class Be extends r.Component{constructor(e,t){super(e,t),o()(this,"_setChoice1Ref",e=>{this._choice1=e}),o()(this,"_setChoice2Ref",e=>{this._choice2=e}),o()(this,"_setChoice3Ref",e=>{this._choice3=e}),o()(this,"_setChoice4Ref",e=>{this._choice4=e}),o()(this,"_setDurationPickerRef",e=>{this._durationPicker=e}),o()(this,"_handleValidation",()=>{const{onValid:e,onInvalid:t}=this.props,a=this.choices,{_choice1:n,_choice2:s,_choice3:i,_choice4:o}=this,r=[n,s,i,o].filter(Boolean).every(e=>e.isValid);a&&a.length>=2&&r?e():t()}),o()(this,"_handleAdd",()=>{const{analytics:e}=this.props;e.scribe({element:"add_poll_option",action:"click"}),this.setState(({choiceCount:e})=>({autoFocus:!0,choiceCount:e+1}))});const{initialChoices:a}=e,n=void 0===a,s=(a||[]).length,i=s>2?s:2;this.state={autoFocus:n,choiceCount:i}}render(){const{editable:e,initialChoices:t=[],initialDuration:a,isActive:n,onRemove:s}=this.props,{autoFocus:i,choiceCount:o}=this.state;return r.createElement(m.a,{style:De.root},r.createElement(m.a,{style:De.choicesAndAddButton},r.createElement(m.a,{style:De.choices},r.createElement(he,{autoFocus:i,defaultValue:t[0],editable:e&&n,label:Ee,name:"Choice1",onChange:this._handleValidation,ref:this._setChoice1Ref}),r.createElement(he,{defaultValue:t[1],editable:e&&n,label:Ie,name:"Choice2",onChange:this._handleValidation,ref:this._setChoice2Ref}),o>=3?r.createElement(he,{autoFocus:i,defaultValue:t[2],editable:e&&n,label:Re,name:"Choice3",onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===o?r.createElement(he,{autoFocus:i,defaultValue:t[3],editable:e&&n,label:ke,name:"Choice4",onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),r.createElement(m.a,{style:De.rightColumn},o<4?r.createElement(b.a,{accessibilityLabel:Ae,disabled:!(e&&n),icon:r.createElement(Te.a,null),onPress:this._handleAdd,size:"normal",style:De.addButton,type:"text"}):null)),r.createElement(we,{editable:e,initialDuration:a,isActive:n,ref:this._setDurationPickerRef,style:De.durationPicker}),r.createElement(m.a,{style:De.removePollButton},r.createElement(Se.a,{color:"red500",label:Me,onPress:s,withBottomBorder:!1})))}get choices(){const{_choice1:e,_choice2:t,_choice3:a,_choice4:n}=this;return[e&&e.value,t&&t.value,a&&a.value,n&&n.value].filter(Boolean)}get duration(){return this._durationPicker?this._durationPicker.duration:void 0}}const De=y.a.create(e=>({root:{flexDirection:"column",backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,paddingTop:e.spaces.xSmall,overflow:"hidden"},choicesAndAddButton:{paddingLeft:e.spaces.small,paddingRight:e.spaces.small,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1,marginRight:e.spaces.xxSmall},removePollButton:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse",marginRight:`calc(-1 * ${e.spaces.xSmall})`,paddingBottom:e.spaces.xSmall,width:e.spaces.xLarge},addButton:{marginBottom:e.spaces.large},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:1,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:1,paddingBottom:e.spaces.xSmall,paddingLeft:e.spaces.small,paddingRight:e.spaces.small,paddingTop:e.spaces.xSmall}}));var Oe=Object(F.a)(Be),Pe=a("b5s6"),Le=a("kIAd"),Fe=a("rcen"),He=a("zmS9"),je=a("WPfJ"),Ne=y.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.xxSmall},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},rightColumn:{paddingTop:e.spaces.xxSmall,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:je.f},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.xLarge,padding:0},tweetAttachmentArea:{zIndex:je.e},iconEmojiPicker:{zIndex:je.c},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.micro,zIndex:je.a},firstToolBarButton:{marginLeft:"-"+e.spaces.xSmall},toolBarButton:{marginHorizontal:0},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.xSmall},separator:{width:"1px",backgroundColor:e.colors.gray300,height:e.fontSizes.jumbo,marginRight:e.spaces.xSmall,marginLeft:`calc(${e.spaces.xSmall} - 2px)`},conversationLine:{alignSelf:"center",backgroundColor:e.colors.gray200,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.xxSmall,marginBottom:e.spaces.xxSmall},conversationLineWithOverflow:{marginTop:"-"+e.spaces.xxSmall},attachmentContainer:{marginTop:e.spaces.xxSmall,marginBottom:e.spaces.xxSmall},mediaPreview:{marginTop:e.spaces.xxSmall},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.xxSmall,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},noBackground:{backgroundColor:e.colors.transparent},addImageActionIcon:{marginRight:e.spaces.micro},addImageTextPadding:{marginEnd:e.spaces.xxLarge},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.xxSmall},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{borderRadius:e.borderRadii.large,paddingVertical:e.spaces.xSmall,paddingLeft:e.spaces.xSmall,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.xxSmall}})),ze="addButton",Ve="altTextLabel",Ue="attachments",We="taggedUsersLabel",Ke="tweetTextarea_",Ge="toolBar",qe="scheduleOption",Xe=a("xM7j"),$e=a("6OUF"),Je=a("tZIO"),Ye=a("5mJL"),Qe=a("DNho"),Ze=a("oSwX"),et=a("rFBM"),tt=a("zfvc"),at=a("Ujvi"),nt=a("yTN1"),st=a("gpVt"),it=a("hOZg"),ot=a("ll3R"),rt=a("J0mu"),lt=a("boUI"),dt=a("6ZHn"),ct=a("/WPq"),ht=a("wpLu"),ut=a("oQhu"),pt=a("YeIG"),mt=a("pKoL"),gt=a("9Xij");class _t extends r.Component{render(){const{media:e,style:t}=this.props;return r.createElement(m.a,{style:t},this._renderImageGroup(e.length))}_renderImageGroup(e){switch(e){case 1:return this._renderGroupOf1();case 2:return this._renderGroupOf2();case 3:return this._renderGroupOf3();case 4:return this._renderGroupOf4();default:return null}}_renderGroupOf1(){const{media:e}=this.props,t=e&&!!e[0].mediaFile,{width:a,height:n}=e&&!t&&e[0].externalMediaDetails||{};return r.createElement(gt.a,{ratio:t?y.a.theme.aspectRatios.landscape:a/n},r.createElement(m.a,{style:bt.mediaPreviewWrapper},this._renderMediaAtIndex(0)))}_renderGroupOf2(){return r.createElement(gt.a,{ratio:y.a.theme.aspectRatios.landscape},r.createElement(m.a,{style:bt.mediaPreviewWrapper},this._renderMediaAtIndex(0,bt.gutterRight),this._renderMediaAtIndex(1)))}_renderGroupOf3(){return r.createElement(gt.a,{ratio:y.a.theme.aspectRatios.landscape},r.createElement(m.a,{style:bt.mediaPreviewWrapper},this._renderMediaAtIndex(0,bt.gutterRight),this._renderColumnWithIndices([1,2])))}_renderGroupOf4(){return r.createElement(gt.a,{ratio:y.a.theme.aspectRatios.landscape},r.createElement(m.a,{style:bt.mediaPreviewWrapper},this._renderColumnWithIndices([0,2],bt.gutterRight),this._renderColumnWithIndices([1,3])))}_renderColumnWithIndices(e,t){return r.createElement(m.a,{style:[bt.column,t]},this._renderMediaAtIndex(e[0],bt.gutterBottom),this._renderMediaAtIndex(e[1]))}_renderMediaAtIndex(e,t){const{media:a,mediaMetadata:n,editable:s,isActive:i,onClickMedia:o,onEditMedia:l,onRemoveMedia:d,onSetMediaPreviewRef:c}=this.props,h=a[e],u=h.id.toString(),p=n&&n[u]&&n[u].altText,m=n&&n[u]&&n[u].defaultAltText;return r.createElement(mt.a,{accessibilityLabel:p||m,accessibilityRole:"group",enableGif:i,key:h.id,mediaItem:h,onClick:o?o(h.id):void 0,onEdit:l?l(h.id):void 0,onRemove:d(h.id),ref:c,style:[bt.mediaContainer,t],withAltTextLabel:!!p,withCloseButton:s&&i,withEditButton:l&&s&&i})}}const bt=y.a.create(e=>({column:{flexDirection:"column",flexGrow:1,flexBasis:0},gutterRight:{marginRight:e.spaces.xSmall},gutterBottom:{marginBottom:e.spaces.xSmall},mediaContainer:{borderRadius:e.borderRadii.xLarge,transitionProperty:"width",transitionDuration:"0.1s",transitionTimingFunction:"ease-out",overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"row",height:"100%"}}));var yt=a("S1qy"),ft=a.n(yt),xt=a("cjAp"),Ct=a.n(xt);const vt=p.a.f0afcc0e,wt=p.a.ha5e2e79,Tt=p.a.a3de3b68,St=p.a.cc2b28fc,Et=p.a.g45af04e,It=p.a.ee9c4013,Rt=p.a.j499fbcb,kt=p.a.b7d8e3f0,Mt=p.a.d1175c78,At=p.a.e349147b,Bt=p.a.e3a24e4b,Dt=p.a.de4669e2,Ot=p.a.d2c7a41c,Pt=p.a.f7364fa1,Lt=p.a.j6304a5d,Ft=["ja","zh-cn","zh-tw","ko"],Ht=p.a.ia24dc8c,jt=r.createElement(it.a,null),Nt=r.createElement(Te.a,null),zt=r.createElement(ot.a,null),Vt=r.createElement(rt.a,null);class Ut extends r.Component{constructor(e,t){super(e,t),o()(this,"_handleConversationControlsValueChange",e=>{this.props.updateConversationControlsValue(e)}),o()(this,"_triggerConversationControlsImpression",Object(ut.a)(()=>this.context.featureSwitches.isTrue("conversation_controls_limited_replies_creation_enabled"))),o()(this,"_renderConversationControls",e=>{const{isFocused:t}=this.state,{conversationControlsValue:a,isActive:n,isInline:s,isReply:i}=this.props;if(i||!t&&s||this._triggerConversationControlsImpression(),!this._conversationControlsCreationEnabled)return null;const o=n&&!i&&(!s||(t||e)),l=!o&&!s&&!i;return l||o?r.createElement(X,{disabled:this._isScheduled(),hidden:l,onChange:this._handleConversationControlsValueChange,value:a}):null}),o()(this,"_renderFlexibleParticipationEducation",e=>{const{isFocused:t,hasMentions:a}=this.state,{isInline:n,isReply:s,withFlexibleParticipation:i,typeaheadActive:o}=this.props,l=t||e,d=this._hasCompletedMentions||a&&!o;return i&&(d&&s&&(!n||l))&&this.context.featureSwitches.isTrue("conversation_controls_flexible_participation_reply_enabled")?r.createElement(te.a,{Icon:N.a,iconSize:"medium",size:"small",style:Ne.highlightedText,text:Lt,textStyle:Ne.highlightedTextInner}):null}),o()(this,"_renderMainContent",()=>{const{additionalToolbarContent:e,autoFocus:t,data:a,editable:n,index:s,isActive:i,isExpanded:o,isInline:l,isInlineReply:d,isLast:c,keyCommandHandlers:h,onFilesAdded:u,onTextInputBlur:p,onTypeaheadStateChange:g,positionCursorAtBeginning:_,richTextInputContext:b}=this.props,{cardUrl:y,media:f,pollActive:x,quotedStatus:C,text:v}=a,w=Object(st.b)(v)||y&&!Object(ne.a)(y)&&[y],T=!!f.length||x||!!C,S=0===s&&c,E=this.props.typeaheadWrapper,I=!!b,{element:R,sendTweetCommandName:k,dismissComposerCommandName:M}=b||{},A=b?{dismissComposerCommandName:M,editorState:this.state.editorState,element:R,sendTweetCommandName:k}:void 0,B=d&&!b&&!o;return r.createElement(m.a,{style:Ne.textInputArea},r.createElement(m.a,{style:o?Ne.inputStyle:Ne.collapsedInputStyle},r.createElement(E,{contextText:v,isInline:l,onTextUpdated:this._handleTextChange,onTypeaheadStateChange:g},e=>r.createElement($e.a,{appTextSize:"large",ariaLabel:Tt,autoFocus:t||i&&!l,closeButton:i&&(this._deleteNonemptyTweetstormComposerEnabled||this._isEmpty())&&!S?this._renderCloseButton():void 0,contentBelow:this._renderTweetAttachment(),editable:n,inputStyle:[Ne.textInputStyle,B&&Ne.textInputMobileCollapsed],keyCommandHandlers:h,maxNumberOfLines:I?30:10,multiline:!0,numberOfLines:this._calcNumberOfLines(),onBlur:p,onChange:this._getHandleChange(e),onFilesAdded:u,placeholder:this._getPlaceHolderText(),positionCursorAtBeginning:_,positionCursorAtEnd:!_,ref:this._setTextInputRef,richTextInputContext:A,style:Ne.noBackground,styleType:"selection",testID:`${Ke}${s}`,value:v})),w&&!T?r.createElement(st.a,{index:s,isCardPreviewTombstoned:Object(ne.a)(y),urls:w}):null),o?null:e)}),o()(this,"_calcNumberOfLines",()=>{const{richTextInputContext:e,isInline:t,data:a}=this.props,n=!!e,{media:s,pollActive:i,quotedStatus:o}=a,r=!!s.length||!!i||!!o;return n&&(t||r)?1:4}),o()(this,"_renderScheduledTweetLegend",()=>{const{scheduledFor:e}=this.props;return r.createElement(He.a,{onPress:this._handlePressScheduledTweetLegend,scheduledFor:e})}),o()(this,"_handlePressScheduledTweetLegend",()=>{const{history:e,analytics:t,setActiveParentKey:a}=this.props;e.push("/compose/tweet/schedule"),t.scribe({element:"tweet_legend",action:"click"}),a()}),o()(this,"_renderEmojiPicker",()=>r.createElement(J.a,{onEmojiSelect:this._handleInsertEmoji,size:"normal",style:this._getEmojiPickerButtonStyles(),textInputRef:this._textInputRef||void 0})),o()(this,"_getEmojiPickerButtonStyles",Object(ut.a)(()=>[Ne.iconEmojiPicker,Ne.toolBarButton])),o()(this,"_isSchedulingDisabled",()=>{const{conversationControlsValue:e,index:t,isLast:a,data:{pollActive:n,quotedStatus:s,text:i,media:o,mediaTags:r}}=this.props,l=0===t&&a,d=e!==h.all;return Boolean(n||!l||s&&""===i&&!o.length||d||r.length>0)}),o()(this,"_renderSchedulingButton",()=>r.createElement(b.a,{accessibilityLabel:wt,disabled:this._isSchedulingDisabled(),icon:Vt,onClick:this._handleClickScheduler,size:"normal",style:Ne.toolBarButton,testID:qe,type:"text"})),o()(this,"_handleClickScheduler",()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"schedule_tweet",action:"click"}),a()}),o()(this,"_renderCloseButton",()=>{const{onRemoveComposer:e}=this.props;return r.createElement(b.a,{accessibilityLabel:It,icon:jt,onPress:e,size:"small",type:"text"})}),o()(this,"_renderTweetAttachment",()=>{const{data:e,editable:t,isActive:a}=this.props,{media:n,mediaMetadata:s,pollActive:i,initialPollChoices:o,initialPollDuration:l,quotedStatus:d}=e;return 0!==n.length||i||d?r.createElement(m.a,{onClick:this._handleFocus,style:[Ne.attachmentContainer,Ne.tweetAttachmentArea],testID:Ue},n.length>0?r.createElement(_t,{editable:t,isActive:a,media:n,mediaMetadata:s,onClickMedia:this.hasAttachedImage?this._handleClickMediaDetail:void 0,onEditMedia:this.hasAttachedImage?this._handleClickMediaDetail:void 0,onRemoveMedia:this._handleMediaRemoveFactory,onSetMediaPreviewRef:this._handleSetMediaPreviewRef,style:Ne.mediaPreview}):null,a?this._renderMediaActions():null,i?r.createElement(Oe,{editable:t,initialChoices:o,initialDuration:l,isActive:a,onInvalid:this._handlePollInvalid,onRemove:this._handlePollRemove,onValid:this._handlePollValid,ref:this._setPollCreatorRef}):null,d?this._renderQuoteTweet(d):null):null}),o()(this,"_renderQuoteTweet",e=>{const{data:{media:t}}=this.props,a=e.tombstoneInfo;return a&&a.richText?r.createElement(Xe.a,null,r.createElement(Fe.c,{entities:a.richText.entities,rtl:a.richText.rtl,text:a.richText.text})):r.createElement(Pe.a,{isCondensed:t.length>0,style:Ne.quoteTweet,tweetId:e.id_str,withLink:!1,withUserHoverCard:!1})}),o()(this,"_renderToolbar",e=>{const{additionalToolbarContent:t,hidePollAndScheduling:a,isReply:n,richTextInputContext:s,isSelfThreadReply:i,isInlineReply:o}=this.props,l=!!s,d=!o&&!a;return r.createElement(m.a,{style:Ne.toolBar,testID:Ge},r.createElement(m.a,{style:Ne.toolBarIconsContainer},this._renderMediaPickerButton(),this._renderGifButton(),d?this._renderPollButton():null,l?this._renderEmojiPicker():null,d?this._renderSchedulingButton():null),r.createElement(m.a,{style:Ne.toolBarIconsContainer},e?this._renderCountdownCircle():null,n&&!i||!e?null:r.createElement(r.Fragment,null,r.createElement(m.a,{style:Ne.separator}),this._renderAddComposerButton()),t))}),o()(this,"_addOverflowStyle",e=>{const{richTextInputContext:t}=this.props;if(!t)return;const a=e.getCurrentContent().getPlainText(),n=a.length,s=this._getParsedTweet(a).validRangeEnd,i=s+1<n;if(this.state.hasOverflowStyle||i){const a=i?s+1:-1;return{editorState:t.updateOverflowStyle&&t.updateOverflowStyle(e,a,this.state.hasOverflowStyle),hasOverflowStyle:i}}return{editorState:e,hasOverflowStyle:i}}),o()(this,"_getHandleChange",Object(ut.a)(e=>t=>{e(t),this._handleTextChange(t)})),o()(this,"_handleTextChange",e=>{const{data:{key:t,text:a},onTextChange:n,richTextInputContext:s}=this.props;let i;if(s){i=e.getCurrentContent().getPlainText();const t=s.convertEmojiToEntities(e);this.setState(this._addOverflowStyle(t))}else i=Je.a.replaceCarriageReturns(e.target.value);this._hasCompletedMentions=this._hasMentions(i,!0);const o=this._hasMentions(i);this.setState({hasMentions:o}),a!==i&&n(i,t)}),o()(this,"_handleClickAltTextShortcut",()=>{const{analytics:e}=this.props;e.scribe({element:"alt_text_button",action:"click"})}),o()(this,"_handleClickMediaDetail",e=>()=>{const{analytics:t,history:a}=this.props;t.scribe({element:"media_detail_button",action:"click"}),this.hasAttachedImage&&a.push("/compose/tweet/media",{mediaId:e,tab:"crop"})}),o()(this,"_handleDragDrop",e=>{const{addToast:t,data:{pollActive:a},onFilesAdded:n}=this.props;a?t({text:St}):n(e)}),o()(this,"_handleMediaRemoveFactory",e=>()=>{this.props.onRemoveMedia(this.props.index,e)}),o()(this,"_handleInsertEmoji",e=>{const{editorState:t}=this.state,{richTextInputContext:a}=this.props;if(!a)return;const n=a.insertTextAtCursor(t,e.text);this._handleTextChange(n)}),o()(this,"_validateMedia",e=>{const{data:{media:t}}=this.props;return d.c(t.concat(e))}),o()(this,"_handlePollAdd",()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"add_poll",action:"click"}),a({pollActive:!0},t)}),o()(this,"_handlePollRemove",()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"remove_poll",action:"click"}),a({pollActive:!1},t)}),o()(this,"_handlePollInvalid",()=>{const{data:{pollValid:e},index:t,updateSingleComposer:a}=this.props;e&&a({pollValid:!1},t)}),o()(this,"_handlePollValid",()=>{const{data:{pollValid:e},index:t,updateSingleComposer:a}=this.props;!e&&a({pollValid:!0},t)}),o()(this,"_handleFocus",()=>{const{isActive:e,index:t,onFocus:a,setActiveParentKey:n}=this.props;n(),e||(window.requestAnimationFrame(()=>{this._mediaPreviewRef&&this._mediaPreviewRef._playVideo()}),a(t))}),o()(this,"_handleEditorFocus",()=>this.setState({isFocused:!0})),o()(this,"_formatCountdownNumber",e=>Ht(Math.ceil(e/this._userLanguageWeight))),o()(this,"_getPlaceHolderText",()=>{const{data:{quotedStatus:e,pollActive:t},isReply:a,isSelfThreadReply:n,index:s}=this.props;return e?Dt:t?Pt:a&&!n?Ot:n||s>0?Bt:At}),o()(this,"_getNumberOfAltTextEntries",()=>{const{data:{mediaMetadata:e,media:t}}=this.props;return t.reduce((t,a)=>{var n;return e&&!Object(pt.a)(null==(n=e[a.id.toString()])?void 0:n.altText)?t+1:t},0)}),o()(this,"_getParsedTweet",Object(ut.a)(e=>{const t=Ct.a[this.props.twitterTextConfigurationVersion];return ft()(e,t)})),o()(this,"_isEmpty",()=>{const{data:e}=this.props;return Object(se.b)(e)}),o()(this,"_isScheduled",()=>{const{data:{scheduledFor:e}}=this.props;return Object(ie.h)(e)}),o()(this,"_hasMentions",(e,t=!1)=>{const a=e.split(Le.b.WordBoundary);return t&&a.pop(),!!a.find(e=>{const t=Object(Y.d)(e,"compose");return t&&"users"===t.result_type})}),o()(this,"_setPollCreatorRef",e=>{this._pollCreatorRef=e}),o()(this,"_handleSetMediaPreviewRef",e=>{this._mediaPreviewRef=e}),o()(this,"_setTextInputRef",e=>{this._textInputRef=e});const{richTextInputContext:a,userLanguage:n,data:{text:s}}=e,{initEditorState:i}=a||{};this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._deleteNonemptyTweetstormComposerEnabled=this.context.featureSwitches.isTrue("responsive_web_delete_nonempty_tweetstorm_composer_enabled"),this._userLanguageWeight=n&&Ft.indexOf(n)>-1?2:1,this._hasCompletedMentions=this._hasMentions(s,!0),this.state={editorState:i&&i(s),hasOverflowStyle:!1,isFocused:!1,hasMentions:this._hasMentions(s)}}componentDidUpdate(e){(this.hasExternalMedia||this.props.data.media.some(e=>e.mediaFile&&!(e.mediaFile instanceof ae.a)&&e.mediaFile.isVideo))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef._pauseVideo()}focus(){this._textInputRef&&this._textInputRef.focus()}render(){const{isActive:e,isExpanded:t,isInline:a,isLast:n,loggedInUser:s,withAvatar:i}=this.props,o=!this._isEmpty();return r.createElement(m.a,{onFocus:this._handleFocus,style:[Ne.root,!e&&Ne.blurStyle]},r.createElement(Ye.a,{avatarCell:r.createElement(r.Fragment,null,i?r.createElement(Qe.a.Consumer,null,({avatarSize:e})=>r.createElement(Ze.default,{accessibilityLabel:s?s.name:void 0,screenName:s?s.screen_name:void 0,size:e,style:Ne.avatar,uri:s?s.profile_image_url_https:void 0,withLink:a})):null,n?null:r.createElement(m.a,{style:[Ne.conversationLine,!i&&Ne.conversationLineWithOverflow]})),avatarCellStyle:t?Ne.avatarContainerExpanded:Ne.avatarContainer,cellStyle:Ne.rightColumn},this._renderScheduledTweetLegend(),r.createElement(m.a,{onFocus:this._handleEditorFocus,style:Ne.inputArea},r.createElement(et.a,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleDragDrop,style:Ne.dragDrop},e=>r.createElement(r.Fragment,null,r.createElement(m.a,{style:[Ne.composeBoxContainer]},this._renderMainContent())))),this._renderConversationControls(o),this._renderFlexibleParticipationEducation(o),r.createElement(tt.b,{show:e&&t},this._renderToolbar(o))))}_renderMediaPickerButton(){const{data:{media:e},onFilesAdded:t,setActiveParentKey:a}=this.props,n=this.mediaAttachDisabled,s=e.length<3;return r.createElement(oe.a,{acceptGifs:0===e.length,disabled:n,multiple:s,onChange:t,onPress:a,style:[Ne.toolBarButton,Ne.firstToolBarButton],type:"text"})}_renderGifButton(){const{data:{media:e,pollActive:t},history:a,loggedInUser:n,setActiveParentKey:s}=this.props,i=t||e.length||!n;return r.createElement(Z.a,{enabled:!i,gifSearchKeySource:ee.a.Composition,history:a,onPress:s})}_renderPollButton(){const{data:{media:e,pollActive:t,quotedStatus:a},loggedInUser:n}=this.props,s=this._isScheduled(),i=!(!(t||e.length||a||s)&&n);return r.createElement(b.a,{accessibilityLabel:vt,disabled:i,icon:zt,onPress:this._handlePollAdd,size:"normal",style:Ne.toolBarButton,type:"text"})}_renderMediaActions(){const{data:{gifMetadata:e,media:t,mediaTags:a}}=this.props,n=0!==a.length,s=t.some(e=>e.mediaFile&&e.mediaFile.isGif)||this.hasExternalMedia;return this.hasAttachedImage||e||s?r.createElement(m.a,{style:Ne.imageActions},e&&e.url&&e.provider?r.createElement(m.a,{style:Ne.addImageTextPadding},r.createElement(Q.a,{gifUrl:e.url,provider:e.provider})):null,this.hasAttachedImage&&!this._isScheduled()?r.createElement(g.c,{accessibilityLabel:Mt,color:"gray600",link:"/compose/tweet/tags",style:[Ne.addImageTextContainer,Ne.addImageTextPadding]},n?this._renderTaggedUsers():this._renderTagPeopleLabel()):null,this.hasAttachedImage||s?r.createElement(g.c,{accessibilityLabel:Rt({numberOfImages:t.length}),color:"gray600",link:{pathname:"/compose/tweet/media",state:{mediaId:t[0].id,tab:"alt_text"}},onPress:this._handleClickAltTextShortcut,style:Ne.addImageTextContainer},this._renderAltTextLabel()):null):null}_renderTagPeopleLabel(){return r.createElement(g.c,{color:"gray600",size:"small"},r.createElement(lt.a,{style:Ne.addImageActionIcon}),Mt)}_renderTaggedUsers(){const{data:{mediaTags:e},loggedInUser:t}=this.props,a=e.map(e=>({name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str}));return r.createElement(g.c,{color:"gray600",size:"small",testID:We},r.createElement(dt.a,{style:Ne.addImageActionIcon}),r.createElement(at.a,{loggedInUserId:null==t?void 0:t.id_str,users:a}))}_renderAltTextLabel(){const{data:{media:e,mediaMetadata:t}}=this.props;return this.hasAttachedAltText?e.length>1?r.createElement(g.c,{color:"gray600",size:"small",testID:Ve},r.createElement(ht.a,{style:Ne.addImageActionIcon}),kt({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):r.createElement(g.c,{color:"gray600",numberOfLines:1,size:"small",testID:Ve},r.createElement(ht.a,{style:Ne.addImageActionIcon}),t&&t[e[0].id.toString()]&&t[e[0].id.toString()].altText):r.createElement(g.c,{color:"gray600",size:"small",testID:Ve},r.createElement(ct.a,{style:Ne.addImageActionIcon}),Rt({numberOfImages:e.length}))}_renderCountdownCircle(){const{data:{text:e},twitterTextConfigurationVersion:t}=this.props,a=Ct.a[t],n=this._getParsedTweet(e).weightedLength;return r.createElement(nt.a,{count:n,formatNumber:this._formatCountdownNumber,maxCount:a.maxWeightedTweetLength,warningCount:260})}_renderAddComposerButton(){const{disableAddTweet:e,loggedInUser:t,isInline:a,onAddComposer:n}=this.props,s=this._isEmpty(),i=this._isScheduled(),o=e||s||i||!t;return r.createElement(b.a,{accessibilityLabel:Et,disabled:o,icon:Nt,link:!a||s||o?void 0:"/compose/tweet",onPress:n,size:"small",testID:ze,type:"secondary"})}get pollChoices(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.choices:void 0}get pollDuration(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.duration:void 0}get mediaAttachDisabled(){const{data:{media:e,pollActive:t},loggedInUser:a}=this.props,n=e.length,s=e.some(e=>{var t;return null==(t=e.mediaFile)?void 0:t.isGif}),i=e.some(e=>e.mediaFile&&!(e.mediaFile instanceof ae.a)&&e.mediaFile.isVideo);return 4===n||s||i||t||this.hasExternalMedia||!a}get hasAttachedImage(){const{data:{media:e}}=this.props;return e.some(e=>{var t;return null==(t=e.mediaFile)?void 0:t.isImage})}get hasAttachedAltText(){return this._getNumberOfAltTextEntries()>0}get hasExternalMedia(){const{data:{media:e}}=this.props;return e.some(e=>!!e.externalMediaDetails)}}o()(Ut,"contextType",c.a),o()(Ut,"defaultProps",{twitterTextConfigurationVersion:"defaults",withAvatar:!0,conversationControlsValue:"all",updateConversationControlsValue:()=>{}});var Wt=Object(F.a)(Ut),Kt=a("fs1G"),Gt=a("SrIh"),qt=a("BLtI"),Xt=a("kY28");const $t=({children:e})=>r.createElement(g.c,{color:"link"},e),Jt=e=>"@"+e,Yt=y.a.create(e=>({replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.xSmall,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.small,paddingTop:e.spaces.xxSmall},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.gray200,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.xxSmall}}));var Qt=({dataSaverMode:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n,onPress:s,shouldDisplayRepliesText:i,showParentTweet:o=!0})=>{const l=r.useMemo(()=>d.a({inReplyToStatus:a,loggedInUserId:n}).filter(({id_str:e})=>t.indexOf(e)<0),[t,a,n]),c=r.useMemo(()=>{const{user:e}=a.retweeted_status||a;switch(l.length){case 0:return Object(Gt.a)("Compose reply context should not have 0 recipients"),null;case 1:return r.createElement(p.a.I18NFormatMessage,{$i18n:"e34022a7"},r.createElement($t,null,p.a.b50e199a({userName:Jt(e.screen_name)})));case 2:{const t=l.find(({id_str:t})=>t!==e.id_str)||{};return r.createElement(p.a.I18NFormatMessage,{$i18n:"bfd9c99a"},r.createElement($t,null,p.a.f2e4dd37({replyUserName:Jt(e.screen_name),otherUserName:Jt(t.screen_name)})))}case 3:{const[t,a]=l.filter(({id_str:t})=>t!==e.id_str);return r.createElement(p.a.I18NFormatMessage,{$i18n:"g7a1000e"},r.createElement($t,null,p.a.eccfddc3({userOneName:Jt(e.screen_name),userTwoName:Jt(t.screen_name),userThreeName:Jt(a.screen_name)})))}default:{const t=l.find(({id_str:t})=>t!==e.id_str)||{};return r.createElement(p.a.I18NFormatMessage,{$i18n:"i558c201"},r.createElement($t,null,p.a.h758cd22({userOneName:Jt(e.screen_name),userTwoName:Jt(t.screen_name),othersCount:l.length-2})))}}},[a,l]);function h(e){e&&e.preventDefault&&e.preventDefault()}return r.createElement(m.a,null,o?r.createElement(qt.b,{conversationPosition:{isStart:!0},dataSaverMode:e,linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:Kt.a,onAvatarClick:h,onEntityClick:h,onMediaClick:h,onReplyContextClick:h,replyContext:Xt.a.ReplyContextTypes.None,tweet:a,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,r.createElement(m.a,{style:Yt.replyUsersContainer},r.createElement(Ye.a,{avatarCell:o?r.createElement(m.a,{style:Yt.conversationLine}):null,avatarCellStyle:Yt.conversationLineContainer,cellStyle:Yt.repliesTextContainer,style:Yt.grid},i?r.createElement(g.c,{accessibilityRole:"button",color:"gray600",onPress:s,style:o&&Yt.repliesMessage},c):null)))},Zt=a("LdEA"),ea=a.n(Zt),ta=a("Tb0w"),aa=a("ge3j"),na=a("1YZw"),sa=a("pidX"),ia=a("0KEI"),oa=a("zhf3"),ra=a("RqPI"),la=a("XOJV"),da=a("G6rE"),ca=a("AspN"),ha=a("oEGd"),ua=a("hqKg"),pa=a("P1r1");const ma=e=>e.parentTweetId||(e.isInline?oa.a.homeTimeline:oa.a.modal),ga=e=>(t,a)=>{const n=((e,t)=>t.location.state)(0,a);return n?e(n):void 0},_a=Object(ua.createSelector)((e,t)=>t.activeUser,da.e.selectLoggedInUser,(e,t)=>e||t),ba=(e,t)=>t.parentTweetId||ya(e,t)||fa(e,t),ya=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},fa=ga(e=>e.inReplyToStatusId),xa=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,Ca=ga(e=>e.convoCardData),va=ga(e=>e.externalMedia),wa=ga(e=>e.externalMediaFiles),Ta=ga(e=>e.defaultText),Sa=(e,t)=>{const a=Ta(e,t),n=Object(sa.a)(t.location);return(xa(0,t)||((e,t)=>t.location.pathname.indexOf("/compose/tweet")>-1)(0,t))&&n?n:a},Ea=ga(e=>e.quotedStatusId),Ia=ga(e=>e.quotedStatus),Ra=ga(e=>e.isSelfThreadReply),ka=ga(e=>e.positionCursorAtBeginning),Ma=ga(e=>e.promotedContent),Aa=Object(ua.createSelector)((e,t)=>{const a=ma(t);return aa.l(e,a)},Sa,(e,t)=>((e,t)=>t.quotedStatus?t.quotedStatus:Ia(e,t))(e,t)||((e,t)=>{const a=Ea(e,t);return a?la.a.selectHydratedMemoized(e,a):void 0})(e,t),ca.f,(e,t,a,n)=>e.map((e,s)=>{return Object.assign({},(i=e,ea()(i,["mediaIds"])),{media:n.filter(t=>e.mediaIds.some(e=>e===t.id)),quotedStatus:0===s?a:void 0,text:0===s&&t?t:e.text});var i})),Ba=Object(ua.createStructuredSelector)({activeComposerIndex:(e,t)=>{const a=ma(t);return aa.k(e,a)},activeUser:_a,composerData:Aa,conversationControlsValue:(e,t)=>{const a=ma(t);return aa.m(e,a)},conversationTreeEnabled:pa.i,dataSaverMode:pa.k,excludedRecipients:(e,t)=>{const a=ma(t);return aa.n(e,a)},externalMedia:va,externalMediaFiles:wa,inReplyToStatus:(e,t)=>{const a=ba(e,t);return a?la.a.selectHydrated(e,a):void 0},inReplyToStatusId:ba,isIntentRoute:xa,isSelfThreadReply:Ra,isSending:(e,t)=>{const a=ma(t);return aa.o(e,a)},positionCursorAtBeginning:ka,loggedInUser:da.e.selectLoggedInUser,prepopulatedText:Sa,promotedContent:Ma,scheduledFor:aa.p,sendingProgress:aa.q,convoCardData:Ca,userLanguage:ra.f,quotedStatusId:Ea}),Da={addComposer:aa.a,addToast:na.b,createLocalApiErrorHandler:Object(ia.d)("SCREEN_COMPOSE_V2"),createNudge:aa.d,fetchTweetIfNeeded:la.a.fetchOneIfNeeded,removeComposer:aa.h,resetDraft:aa.i,retweet:la.a.retweet,recordNudgeAction:aa.f,recordNudgeResult:aa.g,schedule:aa.j,draftTweet:aa.e,send:aa.r,updateActiveComposerIndex:aa.t,updateConvoCardState:ta.c,updateConversationControlsValue:aa.u,uploadMedia:ca.k,addMedia:ca.b,processMultipleMedia:ca.d,removeMediaUpload:ca.e,updateSingleComposer:aa.w,setActiveParentKey:aa.s,copyDataFromInlineComposerToModalComposer:aa.b,copyDataFromInlineReplyComposerToModalComposer:aa.c};var Oa=Object(ha.g)(Ba,Da),Pa=a("45mF"),La=a("wrlS"),Fa=a("c0ZR"),Ha=a("W5XZ"),ja=a("15eg"),Na=a("MXY2"),za=a("I8M8"),Va=a("eyty"),Ua=a("gUG0"),Wa=a("ymux"),Ka=a("VjLy"),Ga=a("95Se"),qa=a("xKuM");const Xa=p.a.cd33a61c,$a=p.a.g97558f6,Ja=p.a.cd80d930,Ya=p.a.b0476eb2,Qa=p.a.j24c37b2;class Za extends r.Component{constructor(...e){super(...e),o()(this,"_handleHideMoreInfo",()=>{const{hideEducation:e}=this.props;e()})}render(){const{isSmallBreakPoint:e}=this.props;return r.createElement(tt.b,{animateMount:!0,duration:"longer",show:!0,type:"fade"},r.createElement(m.a,{style:en.moreInfoContainer},r.createElement(qa.a,{leftControl:r.createElement(b.a,{icon:r.createElement(Ga.a,{onClick:this._handleHideMoreInfo}),pullLeft:!0,type:"text"}),style:en.moreInfoAppBar,title:"More Info"}),r.createElement(m.a,{style:en.moreInfoContentContainer},r.createElement(g.c,{color:"normal",size:"large",style:en.headlineText,weight:"bold"},Xa),r.createElement(g.c,{color:"gray600",style:en.moreInfoFirstDescription},Ja),r.createElement(g.c,{color:"normal",size:"large",style:en.headlineText,weight:"bold"},$a),r.createElement(g.c,{color:"gray600",style:en.moreInfoSecondDescription},Ya),e&&r.createElement(b.a,{onClick:this._handleHideMoreInfo,style:en.confirmationButton,type:"neutral"},Qa))))}}const en=y.a.create(e=>({headlineText:{marginBottom:e.spaces.xSmall},confirmationButton:{marginVertical:e.spaces.medium},moreInfoAppBar:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},moreInfoContainer:{borderRadius:e.borderRadii.xLarge},moreInfoContentContainer:{padding:e.spaces.medium,paddingBottom:0},moreInfoFirstDescription:{marginBottom:e.spaces.small},moreInfoSecondDescription:{marginBottom:e.spaces.small}}));var tn=a("euJ+"),an=a("1bnC"),nn=a("Qwev"),sn=a("yrzJ"),on=a("eb3s"),rn=a("sgih"),ln=a("rxPX"),dn=a("0pUJ"),cn=a("HAhZ");const hn=(e,t)=>Object(cn.c)(e,"hide_reply_author_education");var un=Object(ln.a)().propsFromState(()=>({shouldShowHideReplyTip:hn})).propsFromActions(({conversationModule:e={}})=>({addTip:cn.a,addToast:na.b,block:da.e.block,createLocalApiErrorHandler:Object(ia.d)("NUDGE"),hideReply:la.a.hideReply,mute:dn.a,recordNudgeAction:aa.f,recordNudgeResult:aa.g,unblock:da.e.unblock,unmute:da.e.unmute,updateDismissCauseConversationTrees:Wa.e,updateDismissCause:e&&e.updateDismissCause})),pn=a("P2xQ");const mn=Object.freeze({ReviseOrMute:"ReviseOrMute",ReviseOrBlock:"ReviseOrBlock",ReviseOrHideThenBlock:"ReviseOrHideThenBlock"}),gn=Object.freeze({BlockUser:"BlockUser",CancelOnBlockUserPrompt:"CancelOnBlockUserPrompt",CancelTweet:"CancelTweet",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",NudgeNotShown:"NudgeNotShown",ReviseTweet:"ReviseTweet",SendTweet:"SendTweet"}),_n=Object.freeze({BlockUser:"BlockUser",CancelComposer:"CancelComposer",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",SaveTweetToDrafts:"SaveTweetToDrafts",SentTweet:"SentTweet",TweetSentWithoutShowingNudge:"TweetSentWithoutShowingNudge"}),bn=p.a.ic011119,yn=p.a.f6b7745a,fn=p.a.a75cc0f8,xn=p.a.a6450e83,Cn=p.a.a9fd20be,vn=p.a.i2b9632d,wn=p.a.e133be4e,Tn=p.a.ge5067bb,Sn=p.a.ea626ab3,En=p.a.i62a03aa,In=p.a.h3032750,Rn=p.a.af250eb6,kn=p.a.ib147a39,Mn=p.a.e8ff17e5,An=p.a.e3275464;class Bn extends r.Component{constructor(...e){super(...e),o()(this,"_getMuteSuccessMessage",pn.b.bind(null,this.context.featureSwitches)),o()(this,"_getUnmuteSuccessMessage",pn.d.bind(null,this.context.featureSwitches)),o()(this,"_isNudgeEducationEnabled",this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),o()(this,"state",{loadingSecondaryButton:!1,showMoreInfo:!1}),o()(this,"_renderInnerBody",()=>{const{loadingSecondaryButton:e}=this.state;return r.createElement(r.Fragment,null,r.createElement(g.c,{align:"center",color:"normal",size:"large",style:Dn.headlineText,weight:"bold"},this._getHeadline()),r.createElement(g.c,{align:"center",color:"gray600"},this._getDescription()),r.createElement(g.c,{align:"center",color:"link",onClick:this._handleMoreInfo,style:Dn.moreInfoButton},In),r.createElement(m.a,{style:Dn.buttons},r.createElement(b.a,{onPress:this._handleRevise,style:Dn.button,type:"secondary"},Mn),r.createElement(b.a,{onPress:this._handleSecondaryAction,style:Dn.button,type:"secondary"},e?this._renderSpinner():this._getSecondaryActionLabel()),r.createElement(b.a,{onPress:this._handleSend,style:Dn.button,type:"secondary"},An)))}),o()(this,"_renderSpinner",()=>{const{nudgeType:e}=this.props,t=e===mn.ReviseOrMute?pn.g:e===mn.ReviseOrBlock?Rn:kn;return r.createElement(nn.a,{accessibilityLabel:t,style:Dn.spinner})}),o()(this,"_renderBlockSheet",()=>{const{recipient:{screen_name:e}}=this.props,t=r.createElement(sn.a,{color:"normal",screenName:e}),a=r.createElement(sn.a,{screenName:e});return r.createElement(on.a,{cancelButtonLabel:En,confirmButtonLabel:xn,confirmButtonType:"destructive",headline:r.createElement(p.a.I18NFormatMessage,{$i18n:"ja6527ba"},t),onCancel:this._handleBlockCancel,onConfirm:this._handleBlockUser,text:r.createElement(p.a.I18NFormatMessage,{$i18n:"a899eb22"},a)})}),o()(this,"_getDescription",()=>{const{nudgeType:e,recipient:t}=this.props,a=r.createElement(sn.a,{screenName:t.screen_name});switch(e){case mn.ReviseOrMute:return r.createElement(p.a.I18NFormatMessage,{$i18n:"d98723c4"},a);case mn.ReviseOrBlock:return r.createElement(p.a.I18NFormatMessage,{$i18n:"fa1a3797"},a);case mn.ReviseOrHideThenBlock:return r.createElement(p.a.I18NFormatMessage,{$i18n:"fa2ffaa7"},a);default:return null}}),o()(this,"_getHeadline",()=>{const{nudgeType:e}=this.props;switch(e){case mn.ReviseOrMute:return bn;case mn.ReviseOrBlock:return yn;case mn.ReviseOrHideThenBlock:return fn;default:return null}}),o()(this,"_getSecondaryActionLabel",()=>{const{nudgeType:e}=this.props;switch(e){case mn.ReviseOrMute:return pn.f;case mn.ReviseOrBlock:return xn;case mn.ReviseOrHideThenBlock:return Tn;default:return null}}),o()(this,"_handleSecondaryAction",()=>{const{nudgeType:e}=this.props;switch(this.setState({loadingSecondaryButton:!0}),e){case mn.ReviseOrMute:this._handleMuteUser();break;case mn.ReviseOrBlock:this._handleBlockUser();break;case mn.ReviseOrHideThenBlock:this._handleHideReplyThenBlock();break;default:return}}),o()(this,"_handleSend",()=>{const{onSend:e}=this.props;this._recordNudgeAction(gn.SendTweet),e()}),o()(this,"_handleBlockCancel",()=>{const{onDiscard:e,showBlockModal:t}=this.props;t&&(this._recordNudgeAction(gn.CancelOnBlockUserPrompt),this._handleHideReply()),e()}),o()(this,"_handleBlockUser",()=>{const{addToast:e,block:t,onDiscard:a,recipient:n,showBlockModal:s,unblock:i}=this.props;this._recordNudgeAction(gn.BlockUser),t(n.id_str).then(()=>{s&&this._handleHideReply(),this._recordNudgeResult(_n.BlockUser),a(),e({action:{label:wn,onAction:()=>{i(n.id_str).then(()=>{e({text:vn})}).catch(this._createApiErrorHandler())}},text:Cn})}).catch(this._createApiErrorHandler())}),o()(this,"_handleMuteUser",()=>{const{addToast:e,mute:t,onDiscard:a,recipient:n,unmute:s}=this.props;this._recordNudgeAction(gn.MuteUser),t(n.id_str).then(()=>{this._recordNudgeResult(_n.MuteUser),a(),e({action:{label:an.a,onAction:()=>{s(n.id_str).then(()=>{e({text:this._getUnmuteSuccessMessage(n.screen_name)})}).catch(this._createApiErrorHandler())}},text:this._getMuteSuccessMessage(n.screen_name)})}).catch(this._createApiErrorHandler())}),o()(this,"_handleHideReplyThenBlock",()=>{const{addTip:e,shouldShowHideReplyTip:t,hidePopover:a,setShowBlockModal:n,setShowHideReplyEducation:s,showHideReplyEducation:i}=this.props;if(a(),i)s(!1);else if(t)return e({hide_reply_author_education:!0}),void s(!0);n(!0)}),o()(this,"_handleHideReply",()=>{const{addToast:e,conversationId:t,conversationTreeEnabled:a,hideReply:n,inReplyToStatusId:s,updateDismissCause:i,updateDismissCauseConversationTrees:o}=this.props;this._recordNudgeAction(gn.HideReply),n(s,{conversation_id:t}).then(()=>{this._recordNudgeResult(_n.HideReply),a?o({entryId:"module-tweet-"+s,feedbackKeys:[tn.d]}):i&&i({entryId:"tweet-"+s,feedbackKeys:[tn.d]}),e({text:Sn})}).catch(this._createApiErrorHandler())}),o()(this,"_handleRevise",()=>{const{onRevise:e}=this.props;this._recordNudgeAction(gn.ReviseTweet),e()}),o()(this,"_handleCancelHideReplyEducation",()=>{const{setShowHideReplyEducation:e}=this.props;e(!1),this._handleRevise()}),o()(this,"_handleBeforeWindowUnload",()=>{this._recordNudgeAction(gn.CloseApp),this._recordNudgeResult(_n.CloseApp)}),o()(this,"_handleMoreInfo",()=>{this.setState({showMoreInfo:!0})}),o()(this,"_hideMoreInfo",()=>{this.setState({showMoreInfo:!1})}),o()(this,"_recordNudgeAction",e=>{const{nudgeId:t,recordNudgeAction:a}=this.props;a({nudgeId:t,nudgeActionType:e})}),o()(this,"_recordNudgeResult",e=>{const{nudgeId:t,recordNudgeResult:a}=this.props;a({nudgeId:t,nudgeResultType:e})}),o()(this,"_createApiErrorHandler",()=>this.props.createLocalApiErrorHandler({showToast:!0}))}componentDidMount(){window.addEventListener("beforeunload",this._handleBeforeWindowUnload)}componentWillUnmount(){window.removeEventListener("beforeunload",this._handleBeforeWindowUnload)}render(){const{screenWidth:e,showBlockModal:t,showHideReplyEducation:a}=this.props,{showMoreInfo:n}=this.state;if(t)return this._renderBlockSheet();if(a)return r.createElement(Ka.a,{onCancel:this._handleCancelHideReplyEducation,onConfirm:this._handleHideReplyThenBlock});const s=e<y.a.theme.breakpoints.small;return this._isNudgeEducationEnabled?s?r.createElement(rn.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:[Dn.container,Dn.smallBreakPointContainer,n&&Dn.noPadding],type:"bottom",withMask:!0},n?r.createElement(Za,{hideEducation:this._hideMoreInfo,isSmallBreakPoint:!0}):this._renderInnerBody()):r.createElement(r.Fragment,null,n&&r.createElement(Za,{hideEducation:this._hideMoreInfo}),r.createElement(m.a,{style:Dn.container},!n&&this._renderInnerBody())):r.createElement(rn.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:Dn.container,type:"center",withMask:!0},this._renderInnerBody())}}o()(Bn,"contextType",c.a);const Dn=y.a.create(e=>({container:{alignItems:"center",backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.xLarge,padding:e.spaces.medium,paddingBottom:e.spaces.xSmall},smallBreakPointContainer:{borderRadius:e.borderRadii.none},noPadding:{padding:0},headlineText:{marginBottom:e.spaces.xSmall},buttons:{marginTop:e.spaces.xSmall,width:"100%"},button:{width:"100%",marginBottom:e.spaces.small},moreInfoButton:{marginTop:e.spaces.xxSmall},spinner:{marginTop:"5px"}}));var On=un(Bn),Pn=(a("AxOO"),a("OiMc")),Ln=a("cHvH");class Fn extends r.Component{constructor(...e){super(...e),o()(this,"state",{nudgeDismissed:!1,showBlockModal:!1,showHideReplyEducation:!1,shouldHidePopover:!1}),o()(this,"_isNudgeEducationEnabled",this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),o()(this,"_renderNudge",()=>{const{conversationTreeEnabled:e,location:t,inReplyToStatus:a,nudgeId:n,nudgeType:s,onDiscard:i,screenWidth:o}=this.props,{showBlockModal:l,showHideReplyEducation:d}=this.state,c=null==a?void 0:a.conversation_id_str,h=t.state&&t.state.previousPath&&t.state.previousPath.split("/status/").slice(-1)[0].split("/")[0];return s&&n&&a&&a.id_str?r.createElement(On,{conversationId:c,conversationModule:h&&this._getConversationModule(h,e),conversationTreeEnabled:e,hidePopover:this._hidePopover,inReplyToStatusId:a.id_str,nudgeId:n,nudgeType:s,onDiscard:i,onRevise:this._handleDismissNudge,onSend:this._handleSend,recipient:a.user,screenWidth:o,setShowBlockModal:this.setShowBlockModal,setShowHideReplyEducation:this.setShowHideReplyEducation,showBlockModal:l,showHideReplyEducation:d}):null}),o()(this,"_getConversationModule",Object(ut.a)((e,t)=>Object(Wa.a)({focalTweetId:e,conversationTreeEnabled:t}))),o()(this,"_handleSend",()=>{const{onSend:e}=this.props;this._handleDismissNudge(),e()}),o()(this,"_handleDismissNudge",e=>{const{clearNudgeType:t,nudgeType:a,screenWidth:n}=this.props;e&&e.stopPropagation(),this._isNudgeEducationEnabled&&n>=y.a.theme.breakpoints.small&&a&&this.setState({nudgeDismissed:!0}),t()}),o()(this,"_hidePopover",()=>{this.setState({shouldHidePopover:!0})}),o()(this,"setShowHideReplyEducation",e=>{this.setState({showHideReplyEducation:e})}),o()(this,"setShowBlockModal",e=>{this.setState({showBlockModal:e})})}render(){const{children:e,nudgeType:t,screenWidth:a}=this.props,{nudgeDismissed:n,shouldHidePopover:s}=this.state;return this._isNudgeEducationEnabled&&a>=y.a.theme.breakpoints.small&&!s?r.createElement(Pn.a,{disabled:n,onDismiss:this._handleDismissNudge,renderContent:this._renderNudge,visibilityBehavior:t?Pn.a.VISIBILITY_BEHAVIOR.forceVisible:Pn.a.VISIBILITY_BEHAVIOR.forceHidden,withArrow:!0,withFixedPosition:!0,withMask:!!t},e):r.createElement(r.Fragment,null,e,this._renderNudge())}}o()(Fn,"contextType",c.a);var Hn=e=>r.createElement(Ln.a,null,({screenWidth:t})=>r.createElement(Fn,s()({},e,{screenWidth:t}))),jn=a("7myi"),Nn=a("7nmT"),zn=a.n(Nn),Vn=a("vbWy"),Un=a("Rp9C"),Wn=a("k49u");const Kn=p.a.i859a9d3,Gn=p.a.a7478929,qn=p.a.adf527d2,Xn=p.a.b25c5b2a,$n=p.a.cc85b9f5,Jn=p.a.a3f10d61,Yn=p.a.d74da9b8,Qn=p.a.c3ebec63,Zn=p.a.b6266b34,es=p.a.a59566d7,ts=p.a.g30d7ec5,as=p.a.d484fca9,ns=p.a.c51ba396,ss=p.a.ef2fa90b;var is={defaultToast:{text:qn},[Wn.a.OverStatusUpdateLimit]:{toast:{text:Gn,action:{label:Kn,link:"https://support.twitter.com/articles/15364"}}},[Wn.a.DuplicateStatusError]:{toast:{text:Xn}},[Wn.a.CurrentUserSuspended]:{toast:{text:$n}},[Wn.a.InReplyToTweetNotFound]:{toast:{text:Jn}},[Wn.a.MentionLimitInTweetExceeded]:{toast:{text:Yn}},[Wn.a.UrlLimitInTweetExceeded]:{toast:{text:Qn}},[Wn.a.HashtagLimitInTweetExceeded]:{toast:{text:Zn}},[Wn.a.CashtagLimitInTweetExceeded]:{toast:{text:es}},[Wn.a.HashtagLengthLimitInTweetExceeded]:{toast:{text:ts}},[Wn.a.AttachmentTypesLimitInTweetExceeded]:{toast:{text:as}},[Wn.a.StatusMalwareError]:{toast:{text:ns,action:{label:Kn,link:"https://support.twitter.com/articles/90491"}}},[Wn.a.StatusTooLongError]:{toast:{text:ss}},showToast:!0},os=a("N5qz"),rs="tweetButton",ls="tweetButtonInline",ds=a("aITJ"),cs=a("sCk0"),hs=a("4zmP"),us=a("JYMr"),ps=a("7N4s"),ms=a("rziq"),gs=a("jTgF"),_s=a("3A2y"),bs=a("s1N3"),ys=a("4FGy"),fs=a("+d3d"),xs=a("mN6z"),Cs=a("sXY3");const vs=p.a.dad5a4b8,ws=p.a.e65aed64,Ts=p.a.d8222374,Ss=p.a.j890123a,Es=p.a.bb01231c,Is=p.a.d4ab68e2,Rs=p.a.d8af8a4c,ks=p.a.d09d4c05,Ms=p.a.i2209530,As=p.a.bf9b89e4,Bs=p.a.f277e949,Ds=p.a.b551cd22,Os=p.a.f026a7fa,Ps=p.a.a5d4fda0,Ls=p.a.ib067d6a,Fs=l.canUseDOM&&document.documentElement&&"scrollBehavior"in document.documentElement.style;class Hs extends r.Component{constructor(e,t){super(e,t),o()(this,"_getParentKey",()=>{const{isInline:e,parentTweetId:t}=this.props;return t||(e?oa.a.homeTimeline:oa.a.modal)}),o()(this,"_updateSingleComposer",(e,t)=>{const{updateSingleComposer:a}=this.props;return a({updates:e,index:t,parentKey:this._getParentKey()})}),o()(this,"_resetDraft",()=>{const{resetDraft:e}=this.props;return e(this._getParentKey())}),o()(this,"_syncTexts",()=>{const{composerData:e}=this.props,{textMap:t}=this.state;e.forEach((e,a)=>{const n=t[e.key];"string"==typeof n&&n!==e.text&&this._updateSingleComposer({text:n},a)})}),o()(this,"_hasGif",e=>e.gifMetadata||e.media.some(e=>e.mediaFile&&e.mediaFile.isGif)),o()(this,"_hasPhoto",e=>e.media&&e.media.some(e=>e.mediaFile&&e.mediaFile.isImage)),o()(this,"_hasVideo",e=>e.media&&e.media.some(e=>e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif)),o()(this,"_handleAnimateComplete",()=>{const{activeComposerIndex:e,onHandleAppBarHeight:t}=this.props,a=zn.a.findDOMNode(this._composerRefs[e]);if(a instanceof window.Element){const{top:e,bottom:n}=a.getBoundingClientRect(),s=Math.max(e,window.scrollY);if(s<window.pageYOffset||n>window.innerHeight){const e=t?s-t()-14:s-14,a=Math.max(e,0);window.requestAnimationFrame(()=>{Fs?window.scrollTo({top:a,left:0,behavior:"smooth"}):window.scrollTo(0,a)})}}}),o()(this,"_handleFetchTweetIfNeeded",()=>{const{createLocalApiErrorHandler:e,inReplyToStatus:t,inReplyToStatusId:a,fetchTweetIfNeeded:n,quotedStatus:s,quotedStatusId:i}=this.props;!t&&a&&n(a).catch(e(Ha.a)),!s&&i&&n(i).catch(e(Ha.a))}),o()(this,"_blockHistory",(e,t)=>{const{isInline:a}=this.props,n=!a&&/unsent/.test(e.pathname),s=!a&&!/\/compose\/tweet\/?$/.test(e.pathname);return this.shouldShowDiscardConfirmation&&"POP"===t&&s?(this.setState({showDiscardTweetConfirmation:!0}),!1):this._canSaveDraft&&n&&"PUSH"===t?this.shouldShowDiscardConfirmation?(this.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:n}),!1):(this._resetDraft(),!0):!this.shouldShowBackgroundSendConfirmation||"POP"!==t||!s||(this._cancelAllMediaUploads(),!1)}),o()(this,"_getKeyCommandHandlers",()=>{const{typeaheadActive:e}=this.state;return e?this._keyCommandHandlersForActiveTypeahead:this._keyCommandHandlers}),o()(this,"handleTweetOrRetweet",()=>{this._scribe({section:"composition",element:"send_tweet",action:"click"});if(this._areComposersValid())return this.isRetweet?this._handleRetweet():this._handleTweet()}),o()(this,"_render",e=>{var t,a,n,i;const{activeUser:o,addComposer:l,addToast:d,composeHeader:c,composerData:h,conversationControlsValue:u,conversationTreeEnabled:p,copyDataFromInlineComposerToModalComposer:g,customizePropsForSingleComposerItem:_,history:y,isInline:f,isSending:x,isSelfThreadReply:C,inReplyToStatus:v,location:w,parentTweetId:T,positionCursorAtBeginning:S,scheduledFor:E,richTextInputContext:I,typeaheadWrapper:R,userLanguage:k,windowWidth:M}=this.props,{isModal:A}=this.context,{errorMessage:B,focused:D,nudgeId:O,nudgeType:P,showDiscardTweetConfirmation:L,typeaheadActive:F,shouldDisableButton:H}=this.state,j=!A&&F,N=f?0:this.props.activeComposerIndex,z=j||f?[h[N]]:h,V=this._areComposersValid(),U=this.hasNonCompliantQuote&&this.isRetweet,W=f?m.a:cs.a,K=f?{}:{onAnimateComplete:A?void 0:this._handleAnimateComplete},G=["community","by_invitation"].includes(null==v||null==(t=v.conversation_control)?void 0:t.policy)&&(null==v||null==(a=v.conversation_control)?void 0:a.invite_via_mention);return r.createElement(m.a,{ref:e?this._setHiddenRootRef:this._setRootRef,style:[T?js.rootInlineReply:js.root,e&&js.hidden]},f?this._renderProgressBar():null,B&&r.createElement(m.a,{style:js.inlineCallout},r.createElement(hs.a,{action:(null==(n=B.action)?void 0:n.label)&&(null==(i=B.action)?void 0:i.link)?{label:B.action.label,link:B.action.link}:void 0,text:B.text,type:"danger"})),r.createElement(m.a,{onFocus:this._handleFocus,style:[js.content,T&&js.contentInlineReply]},v?this._renderReplyContext(e):null,c,r.createElement(W,K,z.map((t,a)=>{const n=Object(ie.h)(t.scheduledFor),i=h.indexOf(t),c=_(t,a,z),B=r.createElement(Hn,{clearNudgeType:this.clearNudgeType,conversationTreeEnabled:p,inReplyToStatus:v,location:w,nudgeId:O,nudgeType:P,onDiscard:this._handleDismissComposerFromNudge,onSend:this._handleSendTweet},A||f?r.createElement(b.a,{disabled:H||!V||U,onPress:this.handleTweetOrRetweet,size:"normal",style:js.inlineSendButton,testID:A?rs:ls,type:"primary"},Object(Na.a)({inReplyToStatus:!!v,isSelfThreadReply:!!C,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!n,isThread:this.isThread})):null),L=this._getSingleComposerDataWithLatestText(t);return r.createElement(m.a,{key:t.key},r.createElement(Wt,s()({addToast:d,additionalToolbarContent:B,autoFocus:!!T&&D,conversationControlsValue:u,data:L,disableAddTweet:h.length>=25,editable:!x&&!!o,hidePollAndScheduling:f&&os.a.isOneColumnSquishedLayout(M),history:y,index:i,isActive:i===N&&!x,isExpanded:0!==a||this._shouldBeExpanded(e),isInline:f,isInlineReply:!!T,isLast:f||i===h.length-1,isReply:!!v||!!T,isSelfThreadReply:!!C,keyCommandHandlers:this._getKeyCommandHandlers(),loggedInUser:o,onAddComposer:f?g:l,onFilesAdded:this._handleAddMediaFiles(i),onFocus:this._handleComposerFocus,onRemoveComposer:this._handleRemoveComposer,onRemoveMedia:this._handleMediaRemove,onTextChange:this._handleTextChange,onTextInputBlur:this._handleTextOnBlur(L.key,a),onTypeaheadStateChange:this._handleTypeaheadStateChange,positionCursorAtBeginning:!!S,ref:this._setComposerRef(i),richTextInputContext:I,scheduledFor:E,setActiveParentKey:this._setActiveParentKey,twitterTextConfigurationVersion:"version3",typeaheadActive:F,typeaheadWrapper:R,updateConversationControlsValue:this._updateConversationControlsValue,updateSingleComposer:this._updateSingleComposer,userLanguage:k,withFlexibleParticipation:G},c)))})),L?this._canSaveDraft?r.createElement(on.a,{cancelButtonLabel:Is,confirmButtonLabel:Ms,headline:Rs,onCancel:this._handleConfirmDiscardTweet,onConfirm:this._handleDraftTweet,onMaskClick:this._handleCancelDiscardTweet,text:ks}):r.createElement(on.a,{confirmButtonLabel:Is,confirmButtonType:"destructive",headline:this.isThread?Ss:Ts,onCancel:this._handleCancelDiscardTweet,onConfirm:this._handleConfirmDiscardTweet,text:Es}):null,r.createElement(m.a,{style:[x&&js.mask]})))}),o()(this,"_renderReplyContext",e=>{const{activeUser:t,dataSaverMode:a,excludedRecipients:n,isInline:s,isSelfThreadReply:i,inReplyToStatus:o}=this.props;if(o&&this._shouldBeExpanded(e))return r.createElement(Qt,{dataSaverMode:a,excludedRecipients:n,inReplyToStatus:o,key:n.join(),loggedInUserId:t?t.id_str:void 0,onPress:this._handleViewRecipients,shouldDisplayRepliesText:!i,showParentTweet:!s})}),o()(this,"_setRootRef",e=>{e&&(this._root=e)}),o()(this,"_setHiddenRootRef",e=>{e&&(this._hiddenExpandedRoot=e)}),o()(this,"_handleTweet",()=>{const{composerData:e}=this.props,{scheduledFor:t}=e[0];this.setState({errorMessage:void 0}),t?Object(ie.h)(t)&&this._handleScheduleTweet():this._checkToxicAndSendTweet()}),o()(this,"_handleTweetError",(e,t)=>a=>{const{analytics:n,createLocalApiErrorHandler:s}=this.props;if(Object(gs.d)(a)&&a.code===za.b.CANCELED)return n.scribeAction(e),Promise.resolve();const i=Object(gs.b)(a);if(i)return this.setState({errorMessage:i}),Promise.resolve();const o=t||Object(Pa.a)(void 0,!1);s(Object.assign({},o))(a),this.setState({errorMessage:{text:Ps}})}),o()(this,"_handleScheduleTweet",()=>{const{addToast:e,composerData:t,excludedRecipients:a,inReplyToStatus:n,schedule:s}=this.props,i=this._getSingleComposerDataWithLatestText(t[0]);s({excludedRecipients:a,inReplyToStatus:n,scheduleData:i}).then(a=>{this.setState({tweetsSentOrScheduled:!0});const n=Object(ie.c)(i.scheduledFor);if(n){const s=Object(ie.b)(n),i=Object(ie.i)(n),o=Ds({scheduleDate:s,scheduleTime:i});e({text:o,action:{label:Bs,link:"/compose/tweet/unsent/scheduled"}}),this._scribeTweetSent(t[0],Object.assign({},a,{id_str:a.scheduled_id_str}),!0)}this._updateConvoCardState(),this._close()}).catch(this._handleTweetError("schedule_tweet_cancel"))}),o()(this,"_handleDraftTweet",()=>{const{addToast:e,composerData:t,draftTweet:a,excludedRecipients:n,inReplyToStatus:s}=this.props,i=this._getSingleComposerDataWithLatestText(t[0]);this._recordNudgeResult(_n.SaveTweetToDrafts),a({excludedRecipients:n,inReplyToStatus:s,draftData:i}).then(a=>{this.setState({showDiscardTweetConfirmation:!1}),e({text:As,action:{label:Bs,link:"/compose/tweet/unsent/drafts"}}),this._scribeTweetSent(t[0],Object.assign({},a,{id_str:a.draft_id_str}),!1,!0),this._updateConvoCardState(),this._close()}).catch(this._handleTweetError("draft_tweet_cancel"))}),o()(this,"_handleSendTweet",()=>{const{addToast:e,analytics:t,composeSemanticCoreId:a,conversationControlsValue:n,excludedRecipients:s,history:i,inReplyToStatus:o,isSelfThreadReply:r,location:l,activeUser:d,promotedContent:c,send:h}=this.props,{nudgeId:u}=this.state,p=this.props.composerData.map(e=>this._getSingleComposerDataWithLatestText(e)),m=Object(ie.c)(p[0].scheduledFor);if(m){const t=Object(ie.b)(m),a=Object(ie.i)(m),n=Ds({scheduleDate:t,scheduleTime:a});return e({text:n,action:{label:Bs,link:""}}),void this._close()}s.length>0&&t.scribe({element:"mentions",action:"edited"}),this._conversationControlsCreationEnabled&&("community"===n?t.scribe({action:"send_community_tweet"}):"by_invitation"===n&&t.scribe({action:"send_mentioned_tweet"}));const g=p.map((e,t)=>Object.assign({},e,{pollChoices:this._composerRefs[t]?this._composerRefs[t].pollChoices:void 0,pollDuration:this._composerRefs[t]?this._composerRefs[t].pollDuration:void 0})),_=this._isNudgeTweetypieEnabled&&this._isSecondaryDegreeNudge?{nudge_enabled:!0,nudge_types:["ReviseOrBlock","ReviseOrMute","ReviseOrHideThenBlock"],nudge_testing_keyword_enabled:!0,previous_nudge_id:u}:{};h(Object.assign({},_,{sendData:g,conversationControlsValue:n,excludedRecipients:s,inReplyToStatus:o,isSelfThreadReply:r,promotedContent:c,composeSemanticCoreId:a})).then(t=>{this.setState({tweetsSentOrScheduled:!0}),t.map((e,t)=>this._scribeTweetSent(p[t],e)),t.length>1&&this._scribeThreadSent(p,t,"thread_send_success");const{onSent:a}=this.props,n=t.length>1?ws:vs;if(e({text:n,action:{label:Bs,link:`/${d?d.screen_name:"i"}/status/${t[0].id_str}`}}),this._isNudgeEnabled&&u){const e=t[0].id_str;this._isShowNudgeEnabled?this._recordNudgeResult(_n.SentTweet,e):this._recordNudgeResult(_n.TweetSentWithoutShowingNudge,e)}this._updateConvoCardState(),this._close(),a&&a({sentTweets:t,inReplyToStatus:o})}).catch(e=>{var a;const{sentTweets:n=[]}=e,s=Array.isArray(e.errors)&&(null==(a=e.errors[0])?void 0:a.code),o=null==e?void 0:e.url,r=null==e?void 0:e.status,d={message:e.type,event_info:s?""+s:void 0,status_code:r,url:o};if(!this._isNudgeTweetypieEnabled||439!==s)throw n.map((e,t)=>this._scribeTweetSent(p[t],e)),Object(gs.d)(e)&&e.code===za.b.CANCELED||t.scribe({action:"send_tweet_failure",data:d}),p.length>1&&this._scribeThreadSent(p,n,"thread_send_failure"),n.length&&i.replace({pathname:l.pathname,state:Object.assign({},Object(_s.a)(l.state||{},"quotedStatus"),{inReplyToStatusId:n[n.length-1].id_str,isSelfThreadReply:!0})}),e;{var c;const t=null==(c=e.errors[0])?void 0:c.nudge,a=t.id,n=t.nudge_type,s=n.charAt(0).toUpperCase()+n.slice(1);this.setState({nudgeType:s,nudgeId:a})}}).catch(this._handleTweetError("send_tweet_cancel",is))}),o()(this,"_checkToxicAndSendTweet",()=>{const{activeUser:e,composerData:t,createNudge:a,inReplyToStatus:n,isSelfThreadReply:s}=this.props,{hasNudged:i}=this.state,o=n&&n.entities.user_mentions&&n.entities.user_mentions.some(({screen_name:t})=>t===(null==e?void 0:e.screen_name)),r=this._getSingleComposerDataWithLatestText(t[0]).text;this._isSecondaryDegreeNudge=!(s||!o||!a||!r),!this._isNudgeTweetypieEnabled&&this._isNudgeEnabled&&!i&&this._isSecondaryDegreeNudge?(this.setState({shouldDisableButton:!0}),this._checkToxicWithTimeout(r).then(e=>{e.showNudge||this._handleSendTweet()}).finally(()=>{this.setState({shouldDisableButton:!1})})):this._handleSendTweet()}),o()(this,"_makeTimeout",()=>new Promise((e,t)=>setTimeout(e,1500))),o()(this,"_checkToxicWithTimeout",e=>{const{inReplyToStatus:t,location:a}=this.props;return Promise.race([this._checkToxic(e),this._makeTimeout()]).then(e=>{var n,s,i,o,r;const l=null==e||null==(n=e.create_nudge)||null==(s=n.nudge)||null==(i=s.nudge_type)?void 0:i.__typename,d=null==e||null==(o=e.create_nudge)||null==(r=o.nudge)?void 0:r.id;this.setState({nudgeId:d});const c=null==t?void 0:t.user.muting,h=l===mn.ReviseOrMute&&c,u=a.state&&a.state.previousPath.includes("/hidden"),p=l===mn.ReviseOrHideThenBlock&&u;if(l){if(La.b.isTrue("responsive_web_second_degree_replies_nudge_show_enabled"),La.b.isTrue("responsive_web_second_degree_replies_nudge_get_enabled"),this._isShowNudgeEnabled&&!h&&!p)return this.setState({nudgeType:l,hasNudged:!0}),{showNudge:!0};this._recordNudgeAction(gn.NudgeNotShown)}return{}}).catch(()=>({}))}),o()(this,"_checkToxic",e=>{const{createNudge:t,inReplyToStatusId:a,parentTweetId:n=a,inReplyToStatus:s}=this.props;return t(e,n,null==s?void 0:s.conversation_id_str)}),o()(this,"clearNudgeType",()=>{this.setState({nudgeType:void 0})}),o()(this,"_setActiveParentKey",()=>{const{setActiveParentKey:e}=this.props;e(this._getParentKey())}),o()(this,"_scribeTweetSent",(e,t,a=!1,n=!1)=>{const s=e.scheduledTweetId?"schedule_edit_":"schedule_",i=e.draftTweetId?"draft_edit_":"draft_",o=n?i:a?s:"send_",r={items:[Un.a.getTweetItem(t)]},l=e.pollActive&&e.pollValid,d=e.mediaMetadata&&Object.values(e.mediaMetadata).some(e=>!!e),c=this.props.inReplyToStatus||this.props.inReplyToStatusId,h=this.props.isInline?"inline_reply":"tweet_box_dialog";if(this._scribe({action:o+"tweet"},r),n||!e.draftTweetId||e.scheduledTweetId||this._scribe({action:o+"draft_tweet"},r),this.isQuoteTweet&&this._scribe({action:"retweet_with_comment"},r),c&&this._scribe({component:h,action:o+"reply"},r),l&&this._scribe({action:o+"poll_tweet"},r),d&&this._scribe({action:o+"photo_tweet_with_alt_text"},r),this._hasPhoto(e)&&this._scribe({action:o+"photo_tweet"},r),this._hasVideo(e)&&this._scribe({action:o+"video_tweet"},r),e.gifMetadata){const a=Un.a.getGifSearchItemForTweet(t.id_str,e.gifMetadata);this._scribe({element:"remote",action:o+"gif_tweet"},{items:[a]})}else this._hasGif(e)&&this._scribe({element:"local",action:o+"gif_tweet"},r)}),o()(this,"_scribeThreadSent",(e,t,a)=>{const{inReplyToStatus:n}=this.props,s={items:[Un.a.getSendThreadItem(e,t.length,!!n)]};this._scribe({action:a},s)}),o()(this,"_scribeRetweet",e=>{const t={items:[Un.a.getTweetItem(e)]};this._scribe({action:"retweet"},t)}),o()(this,"_handleRetweet",()=>{const{composerData:e,createLocalApiErrorHandler:t,onSent:a,retweet:n}=this.props,s=e[0].quotedStatus;s&&(this._scribeRetweet(s),n(s.id_str,{}).then(e=>{this.setState({tweetsSentOrScheduled:!0}),this._close(),a&&a({sentTweets:e?[e]:[]})},t(Vn.a)))}),o()(this,"handleDismissComposer",()=>{this.shouldShowDiscardConfirmation?this.setState({showDiscardTweetConfirmation:!0}):this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()}),o()(this,"_handleDismissComposerFromNudge",()=>{this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()}),o()(this,"_cancelAllMediaUploads",()=>{this.props.composerData.forEach(e=>e.media.forEach(e=>e.uploading&&e.uploader&&e.uploader.cancel()))}),o()(this,"_handleConfirmDiscardTweet",()=>{const{analytics:e}=this.props,t=this._canSaveDraft?"draft":"send";this.setState({showDiscardTweetConfirmation:!1}),this._recordNudgeResult(_n.CancelComposer),this._close(),e.scribeAction(t+"_tweet_discard")}),o()(this,"_handleCancelDiscardTweet",()=>{this.setState({showDiscardTweetConfirmation:!1},()=>{this._restoreFocusToActiveComposer()})}),o()(this,"_restoreFocusToActiveComposer",()=>{const{activeComposerIndex:e}=this.props;void 0!==e&&this._composerRefs[e]&&this._composerRefs[e].focus()}),o()(this,"_close",()=>{const{history:e,isSending:t,onCloseComposer:a}=this.props;t||(this._resetDraft(),window.Windows&&Object(Ua.a)().then(({default:e})=>e.shareCompletedCallback())),this.state.navigatingToOutbox?this._canSaveDraft?e.push("/compose/tweet/unsent/drafts"):e.push("/compose/tweet/unsent/scheduled"):a&&a()}),o()(this,"_handleComposerFocus",e=>{this._composerRefs[e]?this.props.updateActiveComposerIndex(e):setTimeout(()=>{this._restoreFocusToActiveComposer()},0)}),o()(this,"_handleFocus",()=>{const{getTweetHeight:e}=this.props,{focused:t}=this.state;t||this.setState({focused:!0},()=>{if(e&&this._hiddenExpandedRoot){const t=this._hiddenExpandedRoot.getBoundingClientRect().height+e();this._handleHeightChanged(t)}})}),o()(this,"_handleHeightChanged",e=>{const{onHeightChanged:t,onAnimationStarted:a,onAnimationEnded:n}=this.props;a&&a("none"),t&&t(e),window.requestAnimationFrame(()=>{n&&n()})}),o()(this,"_handleTypeaheadStateChange",e=>{this.setState({typeaheadActive:e})}),o()(this,"_handleRemoveComposer",()=>{const{activeComposerIndex:e,composerData:t,history:a,location:n,removeComposer:s}=this.props;0===e&&t[0].quotedStatus&&a.replace({pathname:n.pathname,state:Object(_s.a)(n.state||{},"quotedStatus")}),s(),setTimeout(this._restoreFocusToActiveComposer)}),o()(this,"_handleViewRecipients",()=>{const{excludedRecipients:e,history:t,inReplyToStatus:a}=this.props;this._setActiveParentKey(),t.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:e,inReplyToStatus:a}})}),o()(this,"_handleTextChange",(e,t)=>{const{textMap:a}=this.state,{activeComposerIndex:n,isInline:s,setValidity:i}=this.props;if(this.setState({textMap:Object.assign({},a,{[t]:e})},()=>{i&&i(this._areComposersValid())}),ds.a.isIOS()){const t=s?0:n;this._updateSingleComposer({text:e},t)}}),o()(this,"_handleTextOnBlur",Object(ut.a)((e,t)=>()=>{const{textMap:a,tweetsSentOrScheduled:n}=this.state,{composerData:s}=this.props,i=a[e],o=s.some(t=>t.key===e);"string"==typeof i&&!n&&o&&this._updateSingleComposer({text:i},t)})),o()(this,"_updateConversationControlsValue",e=>{if(!this._conversationControlsCreationEnabled)return;const{updateConversationControlsValue:t}=this.props;t(e,this._getParentKey())}),o()(this,"_renderProgressBar",()=>{const{sendingProgress:e,isSending:t}=this.props;return r.createElement(us.a,{progress:t?Math.max(e,.02):0,style:[js.progressBar]})}),o()(this,"_updateConvoCardState",()=>{const{convoCardData:e,updateConvoCardState:t}=this.props;if(e){const{cardId:a,nextState:n}=e;n&&a&&t(a,{cardState:n})}}),o()(this,"_attachExternalMedia",e=>t=>Promise.all(t.map(e=>Object(Fa.a)(e))).then(this._handleAddMediaFiles(e))),o()(this,"_handleAddMediaFiles",e=>t=>{const{addMedia:a,addToast:n,composerData:s,dataSaverMode:i,processMultipleMedia:o,removeMediaUpload:r,uploadMedia:l}=this.props;a(t,{location:Va.c.Tweet}).then(t=>{const a=s[e],d=t.map(e=>e.id);if(Hs._validateMedia(a,t)){const n=a.media.map(e=>e.id);this._updateSingleComposer({mediaIds:Object(bs.a)(n.concat(d))},e),o(t,{onFailure:this._handleMediaRemoveFactory(e)}).then(e=>{i||l(e.map(e=>e.id),{preUpload:!0})})}else n({text:Ls}),r(d)})}),o()(this,"_handleMediaRemoveFactory",e=>t=>this._handleMediaRemove(e,t)),o()(this,"_handleMediaRemove",(e,t)=>{const{composerData:a,removeMediaUpload:n}=this.props,{media:s,mediaMetadata:i,mediaTags:o}=a[e],r=((e,...t)=>Object(ys.a)(e,t))(s.map(e=>e.id),t),l=r.length>0?o:[];this._updateSingleComposer({mediaIds:r,gifMetadata:void 0,mediaMetadata:i&&Object(_s.a)(i,t.toString()),mediaTags:l},e),n(t),this.setState({errorMessage:void 0})}),o()(this,"_setComposerRef",e=>t=>{this._composerRefs[e]=t}),o()(this,"_shouldBeExpanded",e=>{const{composerData:t,parentTweetId:a}=this.props,{focused:n}=this.state;if(e||n)return!0;const s=!Object(se.b)(this._getSingleComposerDataWithLatestText(t[0]));return!a||s}),o()(this,"_areComposersValid",()=>{const{composerData:e}=this.props;return this.isRetweet||e.every(e=>Object(se.d)(this._getSingleComposerDataWithLatestText(e)))}),o()(this,"_areComposersEmptyOrUnchanged",()=>{const{composerData:e,prepopulatedText:t}=this.props;return e.every(e=>Object(se.c)(this._getSingleComposerDataWithLatestText(e),t))}),o()(this,"_getSingleComposerDataWithLatestText",e=>{const{textMap:t}=this.state;return"string"==typeof t[e.key]?Object.assign({},e,{text:t[e.key]}):e}),o()(this,"_recordNudgeAction",e=>{const{recordNudgeAction:t}=this.props,{nudgeId:a}=this.state;a&&t({nudgeId:a,nudgeActionType:e})}),o()(this,"_recordNudgeResult",(e,t)=>{const{recordNudgeResult:a}=this.props,{nudgeId:n}=this.state;n&&a(t?{nudgeId:n,nudgeResultType:e,tweetId:t}:{nudgeId:n,nudgeResultType:e})}),this.state={focused:!1,showDiscardTweetConfirmation:!1,textMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1,shouldDisableButton:!1},this._composerRefs={},this._conversationControlsCreationEnabled=!0===La.b.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._isScrollerV3Enabled=Object(ja.a)(La.b).isEnabled,this._throttledSyncTexts=Object(fs.a)(this._syncTexts,1e3,{leading:!0,trailing:!1}),this._keyCommandHandlers={[ms.b]:this.handleTweetOrRetweet,[ms.a]:this.handleDismissComposer},this._keyCommandHandlersForActiveTypeahead={[ms.b]:this.handleTweetOrRetweet},this._isNudgeEnabled=!0===La.b.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_get_enabled"),this._isShowNudgeEnabled=!0===La.b.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_show_enabled"),this._isNudgeTweetypieEnabled=!0===La.b.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_tweetypie_enabled")}UNSAFE_componentWillMount(){const{onRef:e}=this.props;e&&e(this)}componentDidMount(){const{convoCardData:e,externalMedia:t,externalMediaFiles:a,history:n,isIntentRoute:s,isInline:i,location:o,parentTweetId:r,prepopulatedText:l,setValidity:d}=this.props;if(this._unblockHistory=this.props.history.block(this._blockHistory),t.length>0&&this._attachExternalMedia(0)(t),a.length>0&&this._handleAddMediaFiles(0)(a),this._handleFetchTweetIfNeeded(),l||e&&e.cardUrl){const t=Object.assign({},null);l&&(t.text=l),e&&e.cardUrl&&(t.cardUrl=e.cardUrl),this._updateSingleComposer(t)}(l||e&&e.cardUrl||t.length>0||a.length>0)&&!s&&n.replace({query:Object(sa.b)(o.query),search:"",pathname:o.pathname,state:Object(_s.a)(Object(sa.b)(o.state||{}),["defaultText","externalMedia","externalMediaFiles"])}),d&&d(this._areComposersValid()),i||this._setActiveParentKey(),this._isScrollerV3Enabled&&r&&this._root&&(this._height=this._root.getBoundingClientRect().height)}componentDidUpdate(e,t){const{addToast:a,composerData:n,copyDataFromInlineReplyComposerToModalComposer:s,externalMedia:i,externalMediaFiles:o,onRef:r,parentTweetId:l,replyPressToggle:d,setValidity:c,windowWidth:h,getTweetHeight:u}=this.props,{textMap:p}=this.state;if(this._isScrollerV3Enabled&&l&&u&&this._root&&(e.composerData!==n||t.textMap!==p)){const e=this._root.getBoundingClientRect().height;if(e!==this._height){this._height=e;const t=e+u();this._handleHeightChanged(t)}}h!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==r&&e.onRef(void 0),r&&r!==e.onRef&&r(this),n.length>=25&&e.composerData.length<25&&a({text:Os}),i.length>0&&i!==e.externalMedia?this._attachExternalMedia(0)(i):o.length>0&&o!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(o),c&&!Object(xs.a)(n,e.composerData)&&c&&c(this._areComposersValid()),d!==e.replyPressToggle&&s(l)}componentWillUnmount(){const{composerData:e,onRef:t}=this.props;this._unblockHistory&&this._unblockHistory(),t&&t(void 0),Object(Cs.a)(this._composerRefs).forEach(([t,a])=>{const n=parseInt(t,10);if(a)return e[n]&&e[n].pollActive&&this._updateSingleComposer({initialPollChoices:a.pollChoices,initialPollDuration:a.pollDuration},n)}),this._syncTexts()}render(){const{parentTweetId:e}=this.props;return this._isScrollerV3Enabled&&e?r.createElement(r.Fragment,null,this._render(),this._render(!0)):this._render()}_scribe(e,t){const{analytics:a}=this.props;a.scribe(Object.assign({},e,{data:t}))}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length,a=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===a&&t}get isQuoteTweet(){const{composerData:e}=this.props,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0}get hasNonCompliantQuote(){var e;const{composerData:t}=this.props;return"non_compliant"===(null==(e=t[0].quotedStatus)?void 0:e.limited_actions)}get shouldShowDiscardConfirmation(){const{isSending:e,composerData:t}=this.props,{scheduledTweetId:a}=t[0],{showDiscardTweetConfirmation:n}=this.state,s=this._areComposersEmptyOrUnchanged();return!(e||s||n||a)}get shouldShowBackgroundSendConfirmation(){const{composerData:e,isSending:t}=this.props,a=e.some(e=>e.media.some(e=>e.uploading));return t&&a}get _canSaveDraft(){const{composerData:e,isInline:t}=this.props;return!this.isThread&&!e[0].pollActive&&0===e[0].mediaTags.length&&!t}}o()(Hs,"defaultProps",{customizePropsForSingleComposerItem:(e,t,a)=>({}),externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:()=>{},typeaheadWrapper:jn.a}),o()(Hs,"contextType",ps.a),o()(Hs,"_validateMedia",(e,t)=>{const{media:a}=e;return Object(d.c)(a.concat(t))});const js=y.a.create(e=>({root:{paddingBottom:e.spaces.xxSmall},rootInlineReply:{backgroundColor:e.colors.gray50,paddingBottom:e.componentDimensions.gutterVertical},content:{paddingVertical:e.spaces.xxSmall,backgroundColor:e.colors.cellBackground},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:Object.assign({},y.a.absoluteFillObject),inlineSendButton:{marginLeft:e.spaces.xSmall},progressBar:{position:"absolute",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},hidden:{position:"absolute",visibility:"hidden",width:"100%"}}));t.a=Object(F.a)(Oa(Hs))},VjLy:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a("ERkP"),s=a("LT7J"),i=a("3XMw"),o=a.n(i),r=a("feu+"),l=a("eb3s"),d=a("lUZE"),c=a("5cUs");const h=o.a.ge5067bb,u=o.a.ea626ab3,p=o.a.fc716886,m=`${o.a.f2a2a06e}\n\n${o.a.f82c0bbf}`,g=o.a.b2615c6d,_=o.a.i62a03aa,b=o.a.cfd2f35d,y=o.a.a6450e83,f=o.a.hb279a11,x=({onConfirm:e,onCancel:t,onHideReplyImpression:a=(()=>{})})=>n.createElement(r.a,{actionLabel:h,graphic:d.a,headline:p,onAction:e,onClose:t,onImpression:a,onTertiaryAction:t,subtext:m,supportUrl:"https://help.twitter.com/en/using-twitter/mentions-and-replies?lang=browser#hidden-reply",tertiaryActionLabel:b});t.b=({addTip:e,addToast:t,createLocalApiErrorHandler:a,hideReply:i,onBlock:o,onTweetDismiss:r,scribeAction:d,shouldShowHideReplyTip:p,tweet:m})=>{const b=()=>{d({element:"moderated_replies_prompt",action:"impression"})};return{confirmation:p?{render:(e,t)=>x({onConfirm:e,onCancel:t,onHideReplyImpression:b})}:{render:(e,t)=>{const{user:{screen_name:a}}=m;return n.createElement(l.a,{cancelButtonLabel:_,confirmButtonLabel:y,confirmButtonType:"destructive",headline:g({screenName:a}),onCancel:e,onConfirm:()=>{o(),e()},text:f({screenName:a})})}},text:h,onClick:()=>{e({[s.a]:!0}),i(m.id_str,{conversation_id:m.conversation_id_str}).then(e=>{r&&r(),t({text:u})},a({showToast:!0})),d({element:"moderate_reply"})},Icon:c.a}}},WtWS:function(e,t,a){"use strict";a("IAdD");var n=a("ERkP"),s=a("Lsrn"),i=a("k/Ka");const o=(e={})=>Object(i.a)("svg",Object.assign({},e,{style:[s.a.root,e.style],viewBox:"0 0 24 24"}),n.createElement("g",null,n.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm4.086 7.698L11.744 15.6s-.354.545-.416.607c-.146.146-.338.22-.53.22s-.384-.073-.53-.22l-2.7-2.704c-.293-.293-.293-.77 0-1.06.293-.294.768-.294 1.06 0l2.048 2.05 4.155-6.365c.227-.346.693-.443 1.04-.218.345.227.443.692.216 1.038z"})));o.metadata={width:24,height:24},t.a=o},Zg3A:function(e,t,a){"use strict";a("IAdD");var n=a("ERkP"),s=a("Lsrn"),i=a("k/Ka");const o=(e={})=>Object(i.a)("svg",Object.assign({},e,{style:[s.a.root,e.style],viewBox:"0 0 24 24"}),n.createElement("g",null,n.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm8.472 9.442c-.242.19-.472.368-.63.486-.68-1.265-1.002-1.78-1.256-2.007-.163-.145-.37-.223-.78-.375-.367-.136-1.482-.55-1.65-.85-.087-.153.136-.602.23-.793.088-.177.164-.33.196-.497.123-.646-.33-1.146-.728-1.59-.066-.072-.153-.17-.23-.26.335-.12.862-.26 1.42-.384 1.95 1.448 3.26 3.704 3.428 6.272zm-9.788-7.83c.076.25.145.5.182.678-.255.15-.663.363-.96.52-.262.136-.522.273-.738.392-.247.137-.442.234-.6.313-.347.174-.598.3-.833.553-.068.073-.26.278-1.02 1.886l-1.79-.656c1.293-1.94 3.362-3.31 5.76-3.685zM12 20.5c-4.687 0-8.5-3.813-8.5-8.5 0-1.197.25-2.335.7-3.37.47.182 1.713.66 2.75 1.035-.107.336-.245.854-.26 1.333-.03.855.502 1.7.562 1.792.053.08.12.15.2.207.303.21.687.5.827.616.063.343.166 1.26.23 1.833.144 1.266.175 1.48.24 1.65.005.012.514 1.188 1.315 1.188.576-.003.673-.206 1.855-2.688.244-.512.45-.95.513-1.058.1-.144.597-.61.87-.83.55-.442.76-1.82.413-2.682-.335-.83-1.92-2.08-2.5-2.195-.17-.033-.43-.04-.953-.053-.497-.01-1.25-.028-1.536-.09-.098-.024-.314-.094-.605-.196.32-.668.627-1.28.71-1.4.05-.052.168-.112.408-.234.17-.086.383-.192.653-.34.208-.116.458-.247.71-.38 1.168-.612 1.484-.8 1.658-1.082.11-.177.263-.44-.04-1.544 1.042.027 2.038.24 2.955.61-.89.32-1.024.595-1.106.77-.367.784.256 1.475.667 1.93.096.107.24.268.32.38l-.017.036c-.234.472-.67 1.35-.196 2.194.406.72 1.384 1.13 2.437 1.52.134.05.25.092.33.126.16.208.496.79 1 1.735l.154.285c.078.14.33.505.842.505.167 0 .363-.04.59-.137.032-.013.083-.035.18-.094C19.72 17.405 16.22 20.5 12 20.5zm-3.812-9.45c.01-.285.102-.646.184-.907l.027.006c.397.09 1.037.11 1.83.13.32.006.59.008.615 0 .326.143 1.355 1 1.483 1.31.113.28.05.812-.034 1.01-.233.197-.845.735-1.085 1.078-.093.13-.212.373-.64 1.274-.133.276-.313.654-.488 1.013-.026-.225-.054-.472-.08-.686-.225-2.003-.273-2.22-.42-2.445-.05-.078-.202-.31-1.135-.973-.117-.213-.268-.564-.26-.813z"})));o.metadata={width:24,height:24},t.a=o},c0ZR:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("JtPf");const n=e=>new Promise((t,a)=>{const n=new window.XMLHttpRequest;n.responseType="blob",n.onreadystatechange=()=>{n.readyState===window.XMLHttpRequest.DONE&&(200===n.status?t(n.response):a(new Error("Unexpected status code")))},n.onerror=e=>a(e),n.ontimeout=e=>a(e),n.open("GET",e,!0),n.send()})},"p+r5":function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));a("IAdD");var n=a("97Jx"),s=a.n(n),i=a("LdEA"),o=a.n(i),r=a("KEM+"),l=a.n(r),d=a("ERkP"),c=a("t62R"),h=a("piX5"),u=a("3XMw"),p=a.n(u),m=a("tI3i"),g=a.n(m),_=a("oQhu"),b=a("rHpw"),y=a("aITJ"),f=a("MWbm"),x=(a("aWzz"),a("Oib4")),C=a("WtWS"),v=a("ioan");const w=e=>e.length,T=(e,t=w)=>t(e);class S extends d.Component{constructor(e){super(e),l()(this,"_blurOnBackspaceKeyUpForKaiOS",!1),l()(this,"_getTextInputStyle",Object(_.a)(e=>[E.root,!e&&E.disabled])),l()(this,"_calculateLength",e=>T(e,this.props.calculateLength)),l()(this,"_shouldRenderCharCount",()=>{const{isFocused:e}=this.state,t=this._isFormInvalid();return Boolean((e||t)&&this._getMaxCharCount())}),l()(this,"_handleBlur",e=>{const{onBlur:t}=this.props,{value:a}=e.currentTarget,n=this._calculateLength(a);this.setState({isFocused:!1,charCount:n}),t&&t(e)}),l()(this,"_handleChange",e=>{const{onChange:t}=this.props,{value:a}=e.currentTarget,n=this._calculateLength(a);this.setState({isFocused:!0,charCount:n}),t&&t(e)}),l()(this,"_handleFocus",e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t(e)}),l()(this,"_handleKeyPress",e=>{const{multiline:t,onKeyPress:a,onSubmitEditing:n}=this.props;a&&a(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||t||!n||(e.preventDefault(),n(e))}),l()(this,"_handleKeyDown",e=>{const{onKeyDown:t}=this.props,{charCount:a}=this.state,n=0===a;y.a.isKaiOS()&&"Backspace"===e.key&&n?this._blurOnBackspaceKeyUpForKaiOS=n:t&&t(e)}),l()(this,"_handleKeyUp",e=>{const{onKeyUp:t}=this.props;y.a.isKaiOS()&&"Backspace"===e.key&&this._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),this.blur()),t&&t(e)}),l()(this,"_setTextInputRef",e=>{this._textInput=e}),l()(this,"_checkComponentPropsUsageCorrectness",e=>{const{defaultValue:t,maxLength:a,validLength:n,value:s,onChange:i}=e,o=!!i,r="string"==typeof s,l="string"==typeof t;g()(!(!l&&r&&!o),"A controlled component, a component with a value prop, must have an onChange handler. The value prop cannot be undefined."),g()(!(a&&n&&n>a),"Max length should be equal or greater than valid length."),g()(!(void 0!==a&&a<=0||void 0!==n&&n<=0),"Set editable to false instead of limiting the valid character count to 0.")}),l()(this,"_exceedsValidLength",e=>{const t=this._getMaxCharCount();return!!t&&e>t}),l()(this,"_getMaxCharCount",()=>this.props.validLength||this.props.maxLength),this._checkComponentPropsUsageCorrectness(e);const{defaultValue:t,value:a}=e;this.state={charCount:this._calculateLength(a||t||""),isFocused:!1}}componentDidUpdate(e){const{validLength:t,maxLength:a,onChange:n,value:s}=this.props,{validLength:i,maxLength:o,onChange:r,value:l}=e;i===t&&a===o&&!!n===!!r&&"string"==typeof s===("string"==typeof l)||this._checkComponentPropsUsageCorrectness(this.props)}static getDerivedStateFromProps(e,t){const{calculateLength:a,value:n}=e,s="string"==typeof n?T(n,a):0;return"string"==typeof n&&s!==t.charCount?{charCount:s}:null}render(){const{accessibilityLabel:e,errorText:t,helperText:a,style:n,editable:s}=this.props,{isFocused:i}=this.state,o=this._isFormInvalid();return d.createElement(f.a,{style:[I.root,n]},d.createElement(f.a,{accessibilityLabel:e,accessibilityRole:"label",style:[h.a.border,I.textInputFormStyle,o&&h.a.invalidBorderColor,i&&o&&h.a.focusedBorderInvalid,i&&!o&&h.a.focusedBorderValid,!s&&h.a.disabled]},d.createElement(f.a,{style:I.textInputFormWrapper},d.createElement(f.a,{style:[I.textInputHeader]},this._renderLabel(),this._shouldRenderCharCount()?this._renderCharCount():null),this._renderTextInput())),d.createElement(f.a,{style:[I.sidePadding,I.underTextInputForm]},d.createElement(f.a,{style:I.subtextWrapper},a?this._renderHelperText():null,o&&t?this._renderErrorText():null)))}_renderLabel(){const{label:e}=this.props,{isFocused:t}=this.state,a=t?"primary":"gray600",n=this._isFormInvalid()?"red500":a;return d.createElement(c.c,{color:n,numberOfLines:1,size:"small",style:I.textInputHeaderItem},e)}_renderTextInput(){const e=this.props,{editable:t,Icon:a,maxLength:n,showValidationIcon:i}=e,r=o()(e,["accessibilityLabel","calculateLength","editable","errorText","helperText","Icon","invalid","label","maxLength","onBlur","onChange","onSubmitEditing","onFocus","onKeyDown","onKeyPress","onKeyUp","showValidationIcon","style","validLength"]),l=this.getValue(),h=this._calculateLength(l),u=n+l.length-h;return d.createElement(f.a,{style:E.container},a?this._renderIcon():null,d.createElement(c.c,{size:"large",style:E.wrapper},d.createElement(v.a,s()({},r,{editable:t,maxLength:n?u:void 0,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,ref:this._setTextInputRef,style:this._getTextInputStyle(t)}))),i?this._renderValidationIcon():null)}_renderHelperText(){return d.createElement(f.a,{accessibilityLiveRegion:"polite"},d.createElement(c.c,{color:"gray600",size:"small",style:I.subtext},this.props.helperText))}_renderErrorText(){return d.createElement(f.a,{accessibilityLiveRegion:"assertive"},d.createElement(c.c,{color:"red500",size:"small",style:I.subtext},this.props.errorText))}_renderCharCount(){const{charCount:e}=this.state,t=this._getMaxCharCount(),a=this._exceedsValidLength(e),n=t&&p.a.ia24dc8c(t),s=p.a.ia24dc8c(e);return d.createElement(f.a,{accessibilityLiveRegion:"polite",style:[I.textInputHeaderItem,I.charCount]},d.createElement(c.c,{color:a?"red500":"gray600",size:"small"},n?`${s}/${n}`:""))}_renderIcon(){const{Icon:e}=this.props,{isFocused:t}=this.state,a=[I.icon,t&&I.focusedIcon];return e&&d.createElement(e,{style:a})}_renderValidationIcon(){return this._isFormInvalid()?d.createElement(x.a,{style:[I.validationIcon,h.a.invalidColor]}):d.createElement(C.a,{style:[I.validationIcon,h.a.validColor]})}_isFormInvalid(){const{charCount:e}=this.state;return this.props.invalid||this._exceedsValidLength(e)||!1}blur(){this._textInput&&this._textInput.blur()}getValue(){return this._textInput&&this._textInput.getValue()||""}focus(){this._textInput&&this._textInput.focus()}isValidLength(){const e=this.getValue(),t=this._calculateLength(e);return!this._exceedsValidLength(t)}}l()(S,"defaultProps",{autoComplete:"on",autoCorrect:!0,autoFocus:!1,editable:!0,invalid:!1}),S.propTypes={};const E=b.a.create(e=>({container:{flexDirection:"row",flexGrow:1,flexShrink:1,overflow:"hidden",paddingBottom:e.spaces.xxSmall,paddingHorizontal:e.spaces.xxSmall,paddingTop:e.spaces.micro},root:{backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,boxSizing:"border-box",color:"inherit",fontFamily:"inherit",fontSize:"inherit",textAlign:"inherit",outlineStyle:"none",padding:0},wrapper:{alignItems:"center",alignSelf:"flex-start",display:"flex",width:"100%"},disabled:{color:e.colors.gray600}})),I=b.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},textInputFormStyle:{flexDirection:"row"},textInputFormWrapper:{flexGrow:1,flexShrink:1},textInputHeader:{flexDirection:"row",justifyContent:"space-between"},textInputHeaderItem:{paddingTop:e.spaces.xxSmall,paddingHorizontal:e.spaces.xxSmall},charCount:{flexGrow:1,alignItems:"flex-end"},sidePadding:{paddingHorizontal:e.spaces.xxSmall},underTextInputForm:{flexDirection:"row"},subtextWrapper:{flexDirection:"column",flex:1,paddingRight:e.spaces.medium,paddingTop:e.spaces.micro},subtext:{alignSelf:"flex-start"},focusedIcon:{color:e.colors.primary},icon:{alignSelf:"center",color:e.colors.gray600,paddingRight:e.spaces.xxSmall},validationIcon:{alignSelf:"center",paddingLeft:e.spaces.xxSmall}}))},piX5:function(e,t,a){"use strict";const n=a("rHpw").a.create(e=>({border:{borderRadius:e.borderRadii.small,borderWidth:e.borderWidths.small,borderColor:e.colors.gray200},focusedBorderValid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.primary}`,borderColor:e.colors.primary},focusedBorderInvalid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.red500}`},invalidBorderColor:{borderColor:e.colors.red500},invalidColor:{color:e.colors.red500},validColor:{color:e.colors.primary},disabled:{cursor:"default",opacity:.5,backgroundColor:e.colors.gray50,borderColor:e.colors.gray50}}));t.a=n},pidX:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));a("DZ+c"),a("Ysgh"),a("kYxP");var n=a("3XMw"),s=a.n(n),i=a("3A2y");const o=s.a.b2e94283,r=["title","screen_name","text","url","hashtags","via"];t.a=e=>{const t=e.state||{},a=e.query||{},[n,s,i,l,d,c]=r.map(e=>t[e]||a[e]),h=[n,s&&"@"+s.toString(),i,l,d&&d.toString().split(",").map(e=>"#"+e).join(" "),c&&o({viaScreenName:c})].filter(Boolean).join(" ");return h?h+" ":void 0};const l=e=>Object(i.a)(e,r)},rziq:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));const n="send-tweet",s="dismiss-composer"},sCk0:function(e,t,a){"use strict";a("kYxP");var n=a("KEM+"),s=a.n(n),i=a("ERkP"),o=a("zfvc"),r=a("zrc3");const l=Object.freeze({in:"in",out:"out",static:"static"});class d extends i.Component{constructor(...e){super(...e),s()(this,"state",{isAnimating:!1,renderChildren:i.Children.toArray(this.props.children).map(e=>({status:l.static,child:e}))}),s()(this,"_handleEachAnimateComplete",()=>{const{isAnimating:e}=this.state,{onAnimateComplete:t,children:a}=this.props;e&&(t&&t(),this.setState({renderChildren:i.Children.toArray(a).map(e=>({status:l.static,child:e})),isAnimating:!1}))})}static getDerivedStateFromProps(e,t){const a=((e,t)=>{let a=0,n=0;const s=[];for(;n<e.length;){if(a>=t.length){s.push(...e.slice(n).map(e=>({child:e,status:l.out})));break}const i=t[a],o=e[n];if(i.key===o.key)s.push({child:i,status:l.static}),a+=1;else{const e=Object(r.a)(t,e=>e.key===o.key);e>=0?(s.push(...t.slice(a,e).map(e=>({child:e,status:l.in})),{child:t[e],status:l.static}),a=e+1):s.push({child:o,status:l.out})}n+=1}return a<t.length&&s.push(...t.slice(a).map(e=>({child:e,status:l.in}))),s})(t.renderChildren.map(e=>e.child),i.Children.toArray(e.children));return{renderChildren:a,isAnimating:!a.every(e=>e.status===l.static)}}render(){const{renderChildren:e}=this.state;return e.map(({status:e,child:t})=>i.createElement(o.a,{animateMount:e!==l.static,key:t.key,onAnimateComplete:this._handleEachAnimateComplete,show:e!==l.out},t))}}t.a=d},wz7L:function(e,t,a){"use strict";a("IAdD");var n=a("ERkP"),s=a("Lsrn"),i=a("k/Ka");const o=(e={})=>Object(i.a)("svg",Object.assign({},e,{style:[s.a.root,e.style],viewBox:"0 0 24 24"}),n.createElement("g",null,n.createElement("path",{d:"M16.695 13.037c1.185 0 2.51-.132 3.368-1.11.72-.823.952-2.08.715-3.847-.333-2.478-1.86-3.956-4.083-3.956-2.225 0-3.75 1.48-4.084 3.956-.236 1.766-.002 3.023.717 3.846.858.98 2.184 1.11 3.368 1.11zM14.098 8.28c.134-.992.648-2.656 2.598-2.656 1.948 0 2.463 1.664 2.597 2.655.174 1.293.054 2.187-.358 2.657-.367.42-1.036.6-2.238.6s-1.87-.18-2.24-.6c-.412-.47-.533-1.364-.36-2.658zm9.788 11.222c-.763-3.066-3.72-5.208-7.19-5.208-1.765 0-3.392.558-4.67 1.505-1.278-.948-2.905-1.506-4.67-1.506-3.47 0-6.428 2.142-7.19 5.208-.156.625-.025 1.265.356 1.754.37.473.94.744 1.567.744h19.87c.628 0 1.2-.27 1.57-.745.382-.49.512-1.13.356-1.753zm-1.537.83c-.09.11-.22.168-.39.168h-7.413c.078-.32.084-.66 0-.998-.25-1-.75-1.888-1.41-2.65.993-.665 2.223-1.058 3.558-1.058 2.78 0 5.14 1.674 5.735 4.07.044.174.014.344-.08.467zM7.354 20.5H2.09c-.17 0-.3-.057-.388-.168-.096-.123-.126-.294-.083-.47.596-2.395 2.954-4.068 5.735-4.068 2.78 0 5.14 1.674 5.735 4.07.043.174.014.344-.082.467-.088.113-.22.17-.388.17H7.355zm.001-7.463c1.185 0 2.51-.132 3.367-1.11.72-.823.953-2.08.716-3.847-.333-2.478-1.86-3.956-4.083-3.956-2.225 0-3.75 1.48-4.084 3.956-.236 1.766-.002 3.023.717 3.846.858.98 2.184 1.11 3.368 1.11zM4.758 8.28c.134-.992.648-2.656 2.598-2.656 1.948 0 2.463 1.664 2.597 2.655.174 1.293.053 2.187-.358 2.658-.368.42-1.037.6-2.238.6-1.202 0-1.87-.18-2.24-.6-.412-.47-.533-1.365-.36-2.66z"})));o.metadata={width:24,height:24},t.a=o},yTN1:function(e,t,a){"use strict";var n=a("KEM+"),s=a.n(n),i=a("ERkP"),o=a("3XMw"),r=a.n(o),l=a("k6Ei"),d=a("rHpw"),c=(a("aWzz"),a("+/1j")),h=a("MWbm");const u=r.a.c2fc878c,p=r.a.db11b27f;class m extends i.Component{render(){const{count:e,maxCount:t,formatNumber:a,warningCount:n}=this.props,s=t-e,o=s>=0?p({count:a(s)}):u({count:a(e-t)}),r=e>=n?i.createElement(c.a,{accessibilityLiveRegion:"polite","aria-relevant":"all",style:d.a.visuallyHidden},o):null,m=Math.min(1,1-s/t),_=e>=t?"red500":e>=n?"yellow500":"primary",b=i.createElement(l.a,{color:_,progress:m,size:e>=n?30:20,style:[g.progressCircle,s<=-10&&g.hide]}),y=e>=n?i.createElement(c.a,{style:[g.text,s>0?g.gray600:g.red500]},a(s)):null;return i.createElement(h.a,{style:[g.root,g.center]},r,b,i.createElement(h.a,{style:[d.a.absoluteFill,g.center]},y))}}s()(m,"displayName","@twitter/CountdownCircle"),s()(m,"defaultProps",{formatNumber:e=>e}),m.propTypes={};const g=d.a.create(({colors:e})=>({root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:.8,minWidth:16,textAlign:"center"},gray600:{color:e.gray600},red500:{color:e.red500}}));t.a=m},zmS9:function(e,t,a){"use strict";var n=a("ERkP"),s=a("3XMw"),i=a.n(s),o=a("J0mu"),r=a("t62R"),l=a("rHpw"),d=a("QbaN");const c=i.a.bfb895b1,h=l.a.create(e=>({icon:{fontSize:e.fontSizes.normal,paddingRight:e.spaces.xSmall,textAlignVertical:"middle"}}));t.a=({scheduledFor:e,onPress:t})=>{const a=Object(d.c)(e),s=!!a&&(Object(d.h)(e)&&!Object(d.g)(a)&&!Object(d.f)(a)),i=Boolean(t);return a&&s?n.createElement(r.c,{color:"gray600",onPress:t,size:"small",withInteractiveStyling:i},n.createElement(o.a,{style:h.icon}),c({date:Object(d.b)(a),time:Object(d.i)(a)})):null}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~bundle.Compose~bundle.RichTextCompose~bundle.PlainTextCompose.9b2ff6d5.js.map